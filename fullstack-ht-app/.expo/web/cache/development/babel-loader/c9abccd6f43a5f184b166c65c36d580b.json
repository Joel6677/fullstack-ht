{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/Userpage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Button, Avatar, Divider } from 'react-native-paper';\nimport { useHistory } from 'react-router-native';\nimport { GET_IMAGE } from \"../firebase/queries\";\nimport { StateContext } from \"../state\";\nimport Text from \"./Text\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport theme from \"../theme\";\nvar styles = StyleSheet.create({\n  topContainer: {\n    backgroundColor: 'blue',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    zIndex: 1\n  },\n  container: {\n    backgroundColor: 'red',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  bottomContainer: {\n    backgroundColor: 'green'\n  },\n  avatar: {\n    marginBottom: 50,\n    width: 150,\n    height: 150,\n    borderRadius: '100%'\n  },\n  loading: {},\n  button: {\n    marginHorizontal: 50\n  },\n  button2: {\n    marginTop: 20\n  }\n});\n\nvar Userpage = function Userpage() {\n  var history = useHistory();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      img = _useState2[0],\n      setImg = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loaded = _useState6[0],\n      setLoaded = _useState6[1];\n\n  useEffect(function () {\n    firebase.firestore().collection(\"images\").doc(firebase.auth().currentUser.uid).collection(\"userImages\").doc(\"z7wHkAaPtm1R4Kp4MfMl\").get().then(function (snapshot) {\n      setImg(snapshot.data().downloadURL);\n    });\n  });\n  console.log('loading: ', loading);\n  console.log('loaded: ', loaded);\n  return React.createElement(View, {\n    style: styles.topContainer\n  }, React.createElement(View, {\n    style: styles.loading\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    animating: !loaded,\n    color: theme.colors.primary\n  })), React.createElement(Image, {\n    source: {\n      uri: img\n    },\n    style: styles.avatar,\n    onLoadStart: function onLoadStart() {\n      return setLoading(true);\n    },\n    onLoadEnd: function onLoadEnd() {\n      return setLoaded(true);\n    },\n    defaultSource: ''\n  }), React.createElement(View, {\n    style: styles.container\n  }, React.createElement(Button, {\n    icon: \"settings-outline\",\n    mode: \"outlined\",\n    compact: \"true\",\n    style: styles.button\n  }, \"Settings\"), React.createElement(Button, {\n    icon: \"lead-pencil\",\n    mode: \"outlined\",\n    compact: \"true\",\n    style: styles.button,\n    onPress: function onPress() {\n      return history.push('/my-info');\n    }\n  }, \"My info\")), React.createElement(View, {\n    style: styles.bottomContainer\n  }, React.createElement(Button, {\n    icon: \"camera\",\n    mode: \"outlined\",\n    compact: \"true\",\n    style: styles.button2,\n    onPress: function onPress() {\n      return history.push(\"/upload-media\");\n    }\n  }, \"Upload media\")));\n};\n\nexport default Userpage;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/Userpage.jsx"],"names":["React","useState","useEffect","Button","Avatar","Divider","useHistory","GET_IMAGE","StateContext","Text","firebase","theme","styles","StyleSheet","create","topContainer","backgroundColor","flexDirection","justifyContent","alignItems","height","width","position","zIndex","container","bottomContainer","avatar","marginBottom","borderRadius","loading","button","marginHorizontal","button2","marginTop","Userpage","history","img","setImg","setLoading","loaded","setLoaded","firestore","collection","doc","auth","currentUser","uid","get","then","snapshot","data","downloadURL","console","log","colors","primary","uri","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StyleSheet, View, Image, ActivityIndicator, } from 'react-native';\nimport { Button, Avatar, Divider } from 'react-native-paper';\nimport { useHistory } from 'react-router-native';\nimport {GET_IMAGE} from '../firebase/queries';\n\nimport { StateContext } from '../state';\nimport Text from './Text';\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport theme from '../theme';\n\nconst styles = StyleSheet.create({\n  topContainer: {\n    backgroundColor: 'blue',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    zIndex: 1\n  },\n  container: {\n    backgroundColor: 'red',\n    flexDirection: 'row',\n    alignItems: 'center',\n  }, \n  bottomContainer: {\n    \n    backgroundColor: 'green'\n  },\n  avatar: {\n    marginBottom: 50,\n    width: 150, \n    height: 150,\n    borderRadius: '100%'\n  },\n  loading: {\n\n  },\n  button: {\n    marginHorizontal: 50\n  },\n  button2: {\n    marginTop: 20\n  },\n});\n\n\n// const getAvatar = async () => {\n\n//   try {\n//     return await GET_IMAGE();\n//   } catch (err) {\n//     console.log(err);\n//   }\n// };\n\n\nconst Userpage = () => {\n\n  const history = useHistory();\n  const [img, setImg] = useState();\n  const [loading, setLoading] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n\n\n  useEffect(() => {\n    firebase.firestore()\n    .collection(\"images\")\n    .doc(firebase.auth().currentUser.uid)\n    .collection(\"userImages\")\n    .doc(\"z7wHkAaPtm1R4Kp4MfMl\")\n    .get().then((snapshot) => {\n      setImg(snapshot.data().downloadURL);\n    });\n  \n  });\n\n\n\n  console.log('loading: ', loading);\n  console.log('loaded: ', loaded);\n\n  // const db = firebase.firestore();\n\n  // const docRef = db.collection(\"images\").doc(firebase.auth().\n  //   currentUser.uid).collection(\"userImages\").doc(\"z7wHkAaPtm1R4Kp4MfMl\");\n\n  // let url;\n\n  // console.log('get image: ', getImage());\n\n  // docRef.get().then((doc) => {\n  //   if (doc.exists) {\n  //     console.log(\"Document data:\", doc.data().downloadURL);\n  //     url = doc.data().downloadURL;\n  //     console.log('inside url: ', url);\n  //   } else {\n  //     // doc.data() will be undefined in this case\n  //     console.log(\"No such document!\");\n  //   }\n  // }).catch((error) => {\n  //   console.log(\"Error getting document:\", error);\n  // });\n\n  // getAvatar().then(avatar => setImg(avatar));\n  // getAvatar().then(a => console.log(a));\n\n  // console.log('get image: ', img);\n  // console.log('current user: ', firebase.auth().currentUser);\n  return (\n\n      <View style={styles.topContainer}>\n      <View style={styles.loading}>\n        <ActivityIndicator size='large' animating={!loaded} color={theme.colors.primary} />\n      </View>\n      <Image source={{ uri: img }} style={styles.avatar} onLoadStart={() => setLoading(true)}\n      onLoadEnd={() => setLoaded(true)} defaultSource={''}/>\n      <View style={styles.container}>\n        <Button icon=\"settings-outline\" mode=\"outlined\" compact=\"true\" style={styles.button}>\n          Settings\n          </Button>\n\n        <Button icon=\"lead-pencil\" mode=\"outlined\" compact=\"true\" style={styles.button} onPress={() => history.push('/my-info')}>\n          My info\n          </Button>\n\n      </View>\n      <View style={styles.bottomContainer}>\n        <Button icon=\"camera\" mode=\"outlined\" compact=\"true\" style={styles.button2} onPress={() => history.push(\"/upload-media\")}>\n          Upload media\n        </Button>\n      </View>\n      </View>\n\n  );\n};\n\nexport default Userpage;"]},"metadata":{},"sourceType":"module"}