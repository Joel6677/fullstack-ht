{"ast":null,"code":"import * as firebase from 'firebase';\nexport var sendChatMessage = function sendChatMessage(chatID, text, otherUserUid) {\n  firebase.firestore().collection('messages').doc(chatID).collection('chats').add({\n    text: text,\n    createdAt: new Date().getTime(),\n    user: {\n      _id: firebase.auth().currentUser.uid\n    }\n  });\n  firebase.firestore().collection('messages').add({\n    text: text,\n    createdAt: new Date().getTime(),\n    sendFrom: firebase.auth().currentUser.uid,\n    sendTo: otherUserUid\n  });\n};","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/firebase/chat.js"],"names":["firebase","sendChatMessage","chatID","text","otherUserUid","firestore","collection","doc","add","createdAt","Date","getTime","user","_id","auth","currentUser","uid","sendFrom","sendTo"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,UAA1B;AAGA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,MAAD,EAASC,IAAT,EAAeC,YAAf,EAAgC;AAE7DJ,EAAAA,QAAQ,CAACK,SAAT,GACGC,UADH,CACc,UADd,EAEGC,GAFH,CAEOL,MAFP,EAGGI,UAHH,CAGc,OAHd,EAIGE,GAJH,CAIO;AACHL,IAAAA,IAAI,EAAEA,IADH;AAEHM,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFR;AAGHC,IAAAA,IAAI,EAAE;AACJC,MAAAA,GAAG,EAAEb,QAAQ,CAACc,IAAT,GAAgBC,WAAhB,CAA4BC;AAD7B;AAHH,GAJP;AAYEhB,EAAAA,QAAQ,CAACK,SAAT,GACCC,UADD,CACY,UADZ,EAECE,GAFD,CAEK;AACHL,IAAAA,IAAI,EAAEA,IADH;AAEHM,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFR;AAGHM,IAAAA,QAAQ,EAAEjB,QAAQ,CAACc,IAAT,GAAgBC,WAAhB,CAA4BC,GAHnC;AAIHE,IAAAA,MAAM,EAAEd;AAJL,GAFL;AAQH,CAtBM","sourcesContent":["import * as firebase from 'firebase';\n\n\nexport const sendChatMessage = (chatID, text, otherUserUid) => {\n\n  firebase.firestore()\n    .collection('messages')\n    .doc(chatID)\n    .collection('chats')\n    .add({\n      text: text,\n      createdAt: new Date().getTime(),\n      user: {\n        _id: firebase.auth().currentUser.uid\n      }\n    });\n\n    firebase.firestore()\n    .collection('messages')\n    .add({\n      text: text,\n      createdAt: new Date().getTime(),\n      sendFrom: firebase.auth().currentUser.uid,\n      sendTo: otherUserUid\n    });    \n};\n\n\n\n// const messagesRef = firebase.firestore().collection('messages');\n// const currentUser = firebase.auth().currentUser;\n\n// //We define an async function\n// export const getMyMessages = async () => {\n//   const sendFrom = messagesRef.where('sendFrom', '==', currentUser.uid).get();\n//   const sendTo = messagesRef.where('sendTo', '==', currentUser.uid).get();\n\n//   const [sendFromQuerySnapshot, sendToQuerySnapshot] = await Promise.all([\n//     sendFrom,\n//     sendTo\n//   ]);\n\n//   const sendFromArray = sendFromQuerySnapshot.docs;\n//   const sendToArray = sendToQuerySnapshot.docs;\n\n//   const myMessagesArray = sendFromArray.concat(sendToArray);\n\n//   return myMessagesArray;\n// };\n"]},"metadata":{},"sourceType":"module"}