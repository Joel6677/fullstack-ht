{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/UploadWhisky.jsx\";\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport { useHistory } from 'react-router-native';\nimport { Button } from 'react-native-paper';\nimport Text from \"./Text\";\nimport FormikTextInput from \"./FormikTextInput\";\nimport * as firebase from 'firebase';\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    zIndex: 1\n  },\n  fieldContainer: {\n    margin: 5\n  },\n  heading: {\n    alignItems: 'center',\n    marginBottom: 30\n  },\n  buttoncontainer: {}\n});\nvar initialValues = {\n  name: '',\n  distillery: '',\n  country: '',\n  type: '',\n  age: '',\n  abv: '',\n  bottlesize: ''\n};\nvar validationSchema = yup.object().shape({\n  name: yup.string().required('Name is required'),\n  distillery: yup.string().required('Distillery is required'),\n  country: yup.string().required('Country is required'),\n  type: yup.string().required('Type is required'),\n  age: yup.number().required('Age is required'),\n  abv: yup.number().required('Abv is required'),\n  bottlesize: yup.number().required('Bottlesize is required')\n});\n\nvar _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n\nvar _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    visible = _useState4[0],\n    setVisible = _useState4[1];\n\nvar onToggleSnackBar = function onToggleSnackBar() {\n  return setVisible(!visible);\n};\n\nvar onDismissSnackBar = function onDismissSnackBar() {\n  return setVisible(false);\n};\n\nvar pickProfilePicFromLibrary = function pickProfilePicFromLibrary() {\n  var result;\n  return _regeneratorRuntime.async(function pickProfilePicFromLibrary$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\n            allowsEditing: true,\n            aspect: [4, 3],\n            quality: 1\n          }));\n\n        case 2:\n          result = _context.sent;\n\n          if (!result.cancelled) {\n            uploadImage(result.uri);\n            setImage(result.uri);\n            onToggleSnackBar();\n          }\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar UploadWhiskyForm = function UploadWhiskyForm(_ref) {\n  var onSubmit = _ref.onSubmit;\n  return React.createElement(View, null, React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"name\",\n    placeholder: \"Name\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"distillery\",\n    placeholder: \"Distillery\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"country\",\n    placeholder: \"Country\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"type\",\n    placeholder: \"Type\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"age\",\n    keyboardType: \"numeric\",\n    placeholder: \"Age\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"abv\",\n    keyboardType: \"numeric\",\n    placeholder: \"Abv\"\n  })), React.createElement(View, {\n    style: styles.fieldContainer\n  }, React.createElement(FormikTextInput, {\n    name: \"bottlesize\",\n    keyboardType: \"numeric\",\n    placeholder: \"Bottlesize\"\n  })), React.createElement(Button, {\n    icon: \"camera\",\n    mode: \"outlined\",\n    onPress: pickProfilePicFromLibrary,\n    style: styles.buttoncontainer\n  }, \"Upload image\"), React.createElement(Button, {\n    icon: 'bottle-wine',\n    style: styles.fieldContainer,\n    mode: \"outlined\",\n    onPress: onSubmit\n  }, \"Upload whisky\"));\n};\n\nvar UploadWhisky = function UploadWhisky() {\n  var history = useHistory();\n\n  var onSubmit = function onSubmit(values) {\n    var name, distillery, country, type, age, abv, bottlesize;\n    return _regeneratorRuntime.async(function onSubmit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            name = values.name, distillery = values.distillery, country = values.country, type = values.type, age = values.age, abv = values.abv, bottlesize = values.bottlesize;\n            firebase.firestore().collection('whiskies').add({\n              name: name,\n              distillery: distillery,\n              country: country,\n              type: type,\n              age: age,\n              abv: abv,\n              bottlesize: bottlesize\n            });\n            history.push('/');\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(ScrollView, null, React.createElement(View, {\n    style: styles.heading\n  }, React.createElement(Text, {\n    color: 'primary',\n    fontSize: 'heading',\n    fontWeight: 'bold'\n  }, \"Upload Whisky\")), React.createElement(Formik, {\n    initialValues: initialValues,\n    onSubmit: onSubmit,\n    validationSchema: validationSchema\n  }, function (_ref2) {\n    var handleSubmit = _ref2.handleSubmit;\n    return React.createElement(UploadWhiskyForm, {\n      onSubmit: handleSubmit\n    });\n  })));\n};\n\nexport default UploadWhisky;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/UploadWhisky.jsx"],"names":["React","Formik","yup","useHistory","Button","Text","FormikTextInput","firebase","styles","StyleSheet","create","container","flexDirection","justifyContent","height","width","position","zIndex","fieldContainer","margin","heading","alignItems","marginBottom","buttoncontainer","initialValues","name","distillery","country","type","age","abv","bottlesize","validationSchema","object","shape","string","required","number","useState","image","setImage","visible","setVisible","onToggleSnackBar","onDismissSnackBar","pickProfilePicFromLibrary","ImagePicker","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uploadImage","uri","UploadWhiskyForm","onSubmit","UploadWhisky","history","values","firestore","collection","add","push","handleSubmit"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, View, ScrollView } from 'react-native';\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport { useHistory } from 'react-router-native';\n\nimport { Button} from 'react-native-paper';\nimport Text from './Text';\nimport FormikTextInput from './FormikTextInput';\n\nimport * as firebase from 'firebase';\n\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    zIndex: 1\n  },\n  fieldContainer: {\n    margin: 5,\n  },\n  heading: {\n    alignItems: 'center',\n    marginBottom: 30\n  },\n  buttoncontainer: {\n\n  }\n});\n\nconst initialValues = {\n  name: '',\n  distillery: '',\n  country: '',\n  type: '',\n  age: '',\n  abv: '',\n  bottlesize: ''\n\n};\n\nconst validationSchema = yup.object().shape({\n  name: yup\n    .string()\n    .required('Name is required'),\n  distillery: yup\n    .string()\n    .required('Distillery is required'),\n  country: yup\n    .string()\n    .required('Country is required'),\n  type: yup\n    .string()\n    .required('Type is required'),\n  age: yup \n    .number()\n    .required('Age is required'),\n  abv: yup\n    .number()\n    .required('Abv is required'),\n  bottlesize: yup\n    .number()\n    .required('Bottlesize is required')\n});\n\nconst [image, setImage] = useState();\nconst [visible, setVisible] = useState(false);\nconst onToggleSnackBar = () => setVisible(!visible);\nconst onDismissSnackBar = () => setVisible(false);\n\nconst pickProfilePicFromLibrary = async () => { // make universal\n  let result = await ImagePicker.launchImageLibraryAsync({\n    mediaTypes: ImagePicker.MediaTypeOptions.All,\n    allowsEditing: true,\n    aspect: [4, 3],\n    quality: 1,\n  });\n\n  if (!result.cancelled) {\n    uploadImage(result.uri); // make universal\n    setImage(result.uri);\n    onToggleSnackBar();\n  }\n};\n\nconst UploadWhiskyForm = ({ onSubmit }) => {\n  return (\n    <View>\n      <View style={styles.fieldContainer}>\n        <FormikTextInput \n        name=\"name\" \n        placeholder=\"Name\" />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"distillery\"\n          placeholder=\"Distillery\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"country\"\n          placeholder=\"Country\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"type\"\n          placeholder=\"Type\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"age\"\n          keyboardType=\"numeric\"\n          placeholder=\"Age\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"abv\"\n          keyboardType=\"numeric\"\n          placeholder=\"Abv\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"bottlesize\"\n          keyboardType=\"numeric\"\n          placeholder=\"Bottlesize\"\n        />\n      </View>\n\n      <Button icon='camera' mode='outlined' onPress={pickProfilePicFromLibrary} style={styles.buttoncontainer}>Upload image</Button>\n\n      <Button icon={'bottle-wine'} style={styles.fieldContainer} mode='outlined' onPress={onSubmit}>\n          Upload whisky\n      </Button>\n    </View>\n  );\n};\n\n\nconst UploadWhisky = () => {\n  const history = useHistory();\n\n  const onSubmit = async (values) => {\n    const {name, distillery, country, type, age ,abv, bottlesize} = values;\n\n    firebase.firestore().collection('whiskies').add({\n      name: name,\n      distillery: distillery,\n      country: country,\n      type: type,\n      age: age,\n      abv: abv,\n      bottlesize: bottlesize\n    });\n    history.push('/');\n  };\n\n  return (\n    <View style={styles.container}>\n      <ScrollView>\n      <View style={styles.heading}>\n        <Text color={'primary'} fontSize={'heading'} fontWeight={'bold'}>\n          Upload Whisky\n        </Text>\n      </View>\n      \n      <Formik\n        initialValues={initialValues}\n        onSubmit={onSubmit}\n        validationSchema={validationSchema}\n      >\n        {({ handleSubmit }) => <UploadWhiskyForm onSubmit={handleSubmit} />}\n      </Formik>\n      \n      </ScrollView>\n  \n\n    </View>\n  );\n};\n\nexport default UploadWhisky;"]},"metadata":{},"sourceType":"module"}