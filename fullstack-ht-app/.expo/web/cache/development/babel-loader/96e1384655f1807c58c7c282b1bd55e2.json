{"ast":null,"code":"var _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/SingleWhisky.jsx\";\nimport React from 'react';\nimport { useParams } from 'react-router-native';\nimport { useQuery } from '@apollo/react-hooks';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport WhiskyItem from \"./WhiskyItem\";\nimport ReviewItem from \"./ReviewItem\";\nvar styles = StyleSheet.create({\n  separator: {\n    height: 10\n  },\n  reviewItem: {\n    padding: 15\n  }\n});\n\nvar ItemSeparator = function ItemSeparator() {\n  return React.createElement(View, {\n    style: styles.separator\n  });\n};\n\nvar WhiskyInfo = function WhiskyInfo(_ref) {\n  var whisky = _ref.whisky;\n  return React.createElement(React.Fragment, null, React.createElement(View, null), React.createElement(WhiskyItem, {\n    whisky: whisky\n  }), React.createElement(ItemSeparator, null));\n};\n\nvar SingleWhisky = function SingleWhisky() {\n  var whisky = data ? data.whisky : undefined;\n  var reviewNodes = whisky ? whisky.reviews.edges.map(function (_ref2) {\n    var node = _ref2.node;\n    return node;\n  }) : [];\n  return React.createElement(FlatList, {\n    data: reviewNodes,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(ReviewItem, {\n        style: styles.reviewItem,\n        review: item\n      });\n    },\n    keyExtractor: function keyExtractor(_ref4) {\n      var id = _ref4.id;\n      return id;\n    },\n    ListHeaderComponent: function ListHeaderComponent() {\n      return whisky ? React.createElement(WhiskyInfo, {\n        whisky: whisky\n      }) : null;\n    },\n    ItemSeparatorComponent: ItemSeparator,\n    onEndReached: handleFetchMore,\n    onEndReachedThreshold: 0.5\n  });\n};\n\nexport default SingleWhisky;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/SingleWhisky.jsx"],"names":["React","useParams","useQuery","WhiskyItem","ReviewItem","styles","StyleSheet","create","separator","height","reviewItem","padding","ItemSeparator","WhiskyInfo","whisky","SingleWhisky","data","undefined","reviewNodes","reviews","edges","map","node","item","id","handleFetchMore"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,QAAT,QAAyB,qBAAzB;;;;AAGA,OAAOC,UAAP;AAEA,OAAOC,UAAP;AAEA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAE;AADC,GADoB;AAI/BC,EAAAA,UAAU,EAAE;AACVC,IAAAA,OAAO,EAAE;AADC;AAJmB,CAAlB,CAAf;;AASA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEP,MAAM,CAACG;AAApB,IAAN;AAAA,CAAtB;;AAIA,IAAMK,UAAU,GAAG,SAAbA,UAAa,OAAgB;AAAA,MAAbC,MAAa,QAAbA,MAAa;AACjC,SACE,0CACE,oBAAC,IAAD,OADF,EAIE,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAEA;AAApB,IAJF,EAKE,oBAAC,aAAD,OALF,CADF;AASD,CAVD;;AA6BA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AASzB,MAAMD,MAAM,GAAGE,IAAI,GAAGA,IAAI,CAACF,MAAR,GAAiBG,SAApC;AAoBA,MAAMC,WAAW,GAAGJ,MAAM,GACtBA,MAAM,CAACK,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB;AAAA,QAAGC,IAAH,SAAGA,IAAH;AAAA,WAAcA,IAAd;AAAA,GAAzB,CADsB,GAEtB,EAFJ;AAIA,SACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEJ,WADR;AAEE,IAAA,UAAU,EAAE;AAAA,UAAGK,IAAH,SAAGA,IAAH;AAAA,aACV,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAElB,MAAM,CAACK,UAA1B;AAAsC,QAAA,MAAM,EAAEa;AAA9C,QADU;AAAA,KAFd;AAKE,IAAA,YAAY,EAAE;AAAA,UAAGC,EAAH,SAAGA,EAAH;AAAA,aAAYA,EAAZ;AAAA,KALhB;AAME,IAAA,mBAAmB,EAAE;AAAA,aACnBV,MAAM,GAAG,oBAAC,UAAD;AAAY,QAAA,MAAM,EAAEA;AAApB,QAAH,GAAoC,IADvB;AAAA,KANvB;AASE,IAAA,sBAAsB,EAAEF,aAT1B;AAUE,IAAA,YAAY,EAAEa,eAVhB;AAWE,IAAA,qBAAqB,EAAE;AAXzB,IADF;AAeD,CAhDD;;AAkDA,eAAeV,YAAf","sourcesContent":["import React from 'react';\nimport { useParams } from 'react-router-native';\nimport { useQuery } from '@apollo/react-hooks';\nimport { FlatList, StyleSheet, View } from 'react-native';\n\nimport WhiskyItem from './WhiskyItem';\n// import { GET_REPOSITORY } from '../graphql/queries';\nimport ReviewItem from './ReviewItem';\n\nconst styles = StyleSheet.create({\n  separator: {\n    height: 10,\n  },\n  reviewItem: {\n    padding: 15,\n  },\n});\n\nconst ItemSeparator = () => <View style={styles.separator} />;\n\n// images under everything\n\nconst WhiskyInfo = ({ whisky }) => {\n  return (\n    <>\n      <View>\n        \n      </View>\n      <WhiskyItem whisky={whisky} />\n      <ItemSeparator />\n    </>\n  );\n};\n\n// const updateQuery = (previousResult, { fetchMoreResult }) => {\n//   const nextResult = {\n//     repository: {\n//       ...fetchMoreResult.repository,\n//       reviews: {\n//         ...fetchMoreResult.repository.reviews,\n//         edges: [\n//           ...previousResult.repository.reviews.edges,\n//           ...fetchMoreResult.repository.reviews.edges,\n//         ],\n//       },\n//     },\n//   };\n\n//   return nextResult;\n// };\n\nconst SingleWhisky = () => {\n//   const { id } = useParams();\n//   const variables = { id, reviewsFirst: 5 };\n\n//   const { data, loading, fetchMore } = useQuery(GET_REPOSITORY, {\n//     fetchPolicy: 'cache-and-network',\n//     variables,\n//   });\n\n  const whisky = data ? data.whisky : undefined;\n\n//   const handleFetchMore = () => {\n//     const canFetchMore =\n//       !loading && whisky && whisky.reviews.pageInfo.hasNextPage;\n\n//     if (!canFetchMore) {\n//       return;\n//     }\n\n//     fetchMore({\n//       query: GET_REPOSITORY,\n//       variables: {\n//         ...variables,\n//         reviewsAfter: repository.reviews.pageInfo.endCursor,\n//       },\n//       updateQuery,\n//     });\n//   };\n\n  const reviewNodes = whisky\n    ? whisky.reviews.edges.map(({ node }) => node)\n    : [];\n\n  return (\n    <FlatList\n      data={reviewNodes}\n      renderItem={({ item }) => (\n        <ReviewItem style={styles.reviewItem} review={item} />\n      )}\n      keyExtractor={({ id }) => id}\n      ListHeaderComponent={() =>\n        whisky ? <WhiskyInfo whisky={whisky} /> : null\n      }\n      ItemSeparatorComponent={ItemSeparator}\n      onEndReached={handleFetchMore}\n      onEndReachedThreshold={0.5}\n    />\n  );\n};\n\nexport default SingleWhisky;\n"]},"metadata":{},"sourceType":"module"}