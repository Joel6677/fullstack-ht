{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/MyWishList.jsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Button, Snackbar } from 'react-native-paper';\nimport { Link } from 'react-router-native';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport WhiskyItem from \"./WhiskyItem\";\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    zIndex: 1,\n    height: '100%',\n    width: '100%',\n    paddingBottom: 60\n  },\n  WishListItemWrapper: {\n    padding: 15,\n    backgroundColor: '#FFD700'\n  },\n  separator: {\n    height: 10\n  },\n  actionsContainer: {\n    marginTop: 15,\n    flexDirection: 'row'\n  },\n  actionButton: {\n    flexGrow: 1,\n    marginRight: 15\n  },\n  lastActionButton: {\n    marginRight: 0\n  }\n});\n\nvar DeleteWishListButton = function DeleteWishListButton(_ref) {\n  var _onPress = _ref.onPress;\n  var alertButtons = [{\n    text: 'Cancel',\n    style: 'cancel'\n  }, {\n    text: 'Delete',\n    onPress: function onPress() {\n      return _onPress();\n    }\n  }];\n\n  var deleteWithConfirmation = function deleteWithConfirmation() {\n    Alert.alert('Delete whisky', 'Are you sure you want to delete this whisky?', alertButtons, {\n      cancelable: false\n    });\n  };\n\n  return React.createElement(Button, {\n    onPress: deleteWithConfirmation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, \"Delete whisky\");\n};\n\nvar WishListItemWithActions = function WishListItemWithActions(_ref2) {\n  var whisky = _ref2.whisky,\n      onDelete = _ref2.onDelete;\n  console.log('whiskyID: ', whisky.whiskyID);\n  return React.createElement(View, {\n    style: styles.WishListItemWrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, React.createElement(WhiskyItem, {\n    whisky: whisky,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), React.createElement(Link, {\n    component: Button,\n    to: \"/whiskies/\" + whisky.whiskyID,\n    style: styles.actionButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, \"View whisky\"), React.createElement(DeleteWishListButton, {\n    onPress: onDelete,\n    style: [styles.actionButton, styles.lastActionButton],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar ItemSeparator = function ItemSeparator() {\n  return React.createElement(View, {\n    style: styles.separator,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  });\n};\n\nvar MyWishList = function MyWishList() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      myWishList = _useState2[0],\n      setMyWishList = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      visible = _useState4[0],\n      setVisible = _useState4[1];\n\n  console.log('myWishList: ', myWishList);\n  useEffect(function () {\n    {\n      firebase.auth().currentUser && firebase.firestore().collection('wishLists').doc(firebase.auth().currentUser.uid).collection('userWishList').get().then(function (querySnapshot) {\n        var posts = querySnapshot.docs.map(function (doc) {\n          var data = doc.data();\n          var id = doc.id;\n          return _objectSpread({\n            id: id\n          }, data);\n        });\n        setMyWishList(posts);\n      }).catch(function (error) {\n        console.log('Error getting documents: ', error);\n      });\n    }\n  }, []);\n\n  var _onDelete = function onDelete(id) {\n    return _regeneratorRuntime.async(function onDelete$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            firebase.firestore().collection('wishLists').doc(firebase.auth().currentUser.uid).collection('userWishList').doc(id).delete().then(function () {\n              setVisible(true);\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, React.createElement(Snackbar, {\n    visible: visible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, \"Review deleted\"), React.createElement(FlatList, {\n    data: myWishList,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(WishListItemWithActions, {\n        whisky: item,\n        onDelete: function onDelete() {\n          return _onDelete(item.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(_ref4) {\n      var id = _ref4.id;\n      return id;\n    },\n    ItemSeparatorComponent: ItemSeparator,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default MyWishList;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/MyWishList.jsx"],"names":["React","useState","useEffect","Button","Snackbar","Link","firebase","WhiskyItem","styles","StyleSheet","create","container","flexDirection","zIndex","height","width","paddingBottom","WishListItemWrapper","padding","backgroundColor","separator","actionsContainer","marginTop","actionButton","flexGrow","marginRight","lastActionButton","DeleteWishListButton","onPress","alertButtons","text","style","deleteWithConfirmation","Alert","alert","cancelable","WishListItemWithActions","whisky","onDelete","console","log","whiskyID","ItemSeparator","MyWishList","myWishList","setMyWishList","visible","setVisible","auth","currentUser","firestore","collection","doc","uid","get","then","querySnapshot","posts","docs","map","data","id","catch","error","delete","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  FlatList, View, StyleSheet, Alert,\n} from 'react-native';\nimport { Button, Snackbar } from 'react-native-paper';\nimport { Link } from 'react-router-native';\n// import * as firebase from 'firebase';\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport WhiskyItem from './WhiskyItem';\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    zIndex: 1,\n    // position: 'absolute',\n    height: '100%',\n    width: '100%',\n    // paddingTop: 80,\n    paddingBottom: 60,\n  },\n  WishListItemWrapper: {\n    padding: 15,\n    backgroundColor: '#FFD700',\n  },\n  separator: {\n    height: 10,\n  },\n  actionsContainer: {\n    marginTop: 15,\n    flexDirection: 'row',\n  },\n  actionButton: {\n    flexGrow: 1,\n    marginRight: 15,\n  },\n  lastActionButton: {\n    marginRight: 0,\n  },\n});\n\nconst DeleteWishListButton = ({ onPress }) => {\n  const alertButtons = [\n    {\n      text: 'Cancel',\n      style: 'cancel',\n    },\n    {\n      text: 'Delete',\n      onPress: () => onPress(),\n    },\n  ];\n\n  const deleteWithConfirmation = () => {\n    Alert.alert(\n      'Delete whisky',\n      'Are you sure you want to delete this whisky?',\n      alertButtons,\n      { cancelable: false },\n    );\n  };\n\n  return (\n    <Button onPress={deleteWithConfirmation}>\n      Delete whisky\n    </Button>\n  );\n};\n\nconst WishListItemWithActions = ({ whisky, onDelete }) => {\n  console.log('whiskyID: ', whisky.whiskyID);\n\n  return (\n    <View style={styles.WishListItemWrapper}>\n      <WhiskyItem whisky={whisky} />\n      <Link\n        component={Button}\n        to={`/whiskies/${whisky.whiskyID}`}\n        style={styles.actionButton}\n      >\n        View whisky\n      </Link>\n      <DeleteWishListButton\n        onPress={onDelete}\n        style={[styles.actionButton, styles.lastActionButton]}\n      />\n    </View>\n  );\n};\n\nconst ItemSeparator = () => <View style={styles.separator} />;\n\nconst MyWishList = () => {\n  const [myWishList, setMyWishList] = useState([]);\n  const [visible, setVisible] = useState(false);\n\n  console.log('myWishList: ', myWishList);\n\n  useEffect(() => {\n    { firebase.auth().currentUser && firebase.firestore()\n      .collection('wishLists').doc(firebase.auth().currentUser.uid).collection('userWishList')\n      .get()\n      .then((querySnapshot) => {\n        const posts = querySnapshot.docs.map((doc) => {\n          const data = doc.data();\n          const { id } = doc;\n          return { id, ...data };\n        });\n        setMyWishList(posts);\n      })\n      .catch((error) => {\n        console.log('Error getting documents: ', error);\n      });\n    }\n  }, []);\n\n  const onDelete = async (id) => {\n    firebase.firestore().collection('wishLists').doc(firebase.auth().currentUser.uid).collection('userWishList')\n      .doc(id)\n      .delete()\n      .then(() => { setVisible(true); })\n      .catch((error) => { console.log(error); });\n  };\n\n  return (\n    <>\n      <View style={styles.container}>\n        <Snackbar visible={visible}>\n          Review deleted\n        </Snackbar>\n        <FlatList\n          data={myWishList}\n          renderItem={({ item }) => (\n            <WishListItemWithActions\n              whisky={item}\n              onDelete={() => onDelete(item.id)}\n            />\n          )}\n          keyExtractor={({ id }) => id}\n          ItemSeparatorComponent={ItemSeparator}\n        />\n      </View>\n    </>\n  );\n};\n\nexport default MyWishList;\n"]},"metadata":{},"sourceType":"module"}