{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport ApolloClient from 'apollo-boost';\nimport Constants from 'expo-constants';\nvar apolloUri = Constants.manifest.extra.apolloUri;\n\nvar createApolloClient = function createApolloClient(authStorage) {\n  return new ApolloClient({\n    uri: apolloUri,\n    request: function request(operation) {\n      var accessToken;\n      return _regeneratorRuntime.async(function request$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(authStorage.getAccessToken());\n\n            case 3:\n              accessToken = _context.sent;\n              operation.setContext({\n                headers: {\n                  authorization: accessToken ? \"Bearer \" + accessToken : ''\n                }\n              });\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    }\n  });\n};\n\nexport default createApolloClient;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/utils/apolloClient.js"],"names":["ApolloClient","Constants","apolloUri","manifest","extra","createApolloClient","authStorage","uri","request","operation","getAccessToken","accessToken","setContext","headers","authorization","console","log"],"mappings":";AAAA,OAAOA,YAAP,MAAyB,cAAzB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;IAEQC,S,GAAcD,SAAS,CAACE,QAAV,CAAmBC,K,CAAjCF,S;;AAER,IAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,WAAD,EAAiB;AAC1C,SAAO,IAAIN,YAAJ,CAAiB;AACtBO,IAAAA,GAAG,EAAEL,SADiB;AAEtBM,IAAAA,OAAO,EAAE,iBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEqBH,WAAW,CAACI,cAAZ,EAFrB;;AAAA;AAECC,cAAAA,WAFD;AAILF,cAAAA,SAAS,CAACG,UAAV,CAAqB;AACnBC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,EAAEH,WAAW,eAAaA,WAAb,GAA6B;AADhD;AADU,eAArB;AAJK;AAAA;;AAAA;AAAA;AAAA;AAULI,cAAAA,OAAO,CAACC,GAAR;;AAVK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFa,GAAjB,CAAP;AAgBD,CAjBD;;AAmBA,eAAeX,kBAAf","sourcesContent":["import ApolloClient from 'apollo-boost';\nimport Constants from 'expo-constants';\n\nconst { apolloUri } = Constants.manifest.extra;\n\nconst createApolloClient = (authStorage) => {\n  return new ApolloClient({\n    uri: apolloUri,\n    request: async (operation) => {\n      try {\n        const accessToken = await authStorage.getAccessToken();\n\n        operation.setContext({\n          headers: {\n            authorization: accessToken ? `Bearer ${accessToken}` : '',\n          },\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    },\n  });\n};\n\nexport default createApolloClient;"]},"metadata":{},"sourceType":"module"}