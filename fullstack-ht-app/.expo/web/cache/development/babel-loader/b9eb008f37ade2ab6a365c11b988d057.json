{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nexport var sendChatMessage = function sendChatMessage(chatID, chat) {\n  console.log('chatid: ', chatID);\n  console.log('chat: ', chat);\n  firebase.firestore().collection('messages').doc(chatID).collection('chats').add({\n    chat: chat\n  });\n};\nexport var handleSend = function handleSend(messages) {\n  return _regeneratorRuntime.async(function handleSend$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(firebase.firestore().collection('THREADS').doc(thread._id).set({\n            latestMessage: {\n              text: text,\n              createdAt: new Date().getTime()\n            }\n          }, {\n            merge: true\n          }));\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/firebase/chat.js"],"names":["firebase","sendChatMessage","chatID","chat","console","log","firestore","collection","doc","add","handleSend","messages","thread","_id","set","latestMessage","text","createdAt","Date","getTime","merge"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AAIA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,MAAD,EAASC,IAAT,EAAkB;AAC/CC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,MAAxB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,IAAtB;AACAH,EAAAA,QAAQ,CAACM,SAAT,GACGC,UADH,CACc,UADd,EAEGC,GAFH,CAEON,MAFP,EAGGK,UAHH,CAGc,OAHd,EAIGE,GAJH,CAIO;AACHN,IAAAA,IAAI,EAAEA;AADH,GAJP;AAOD,CAVM;AAYP,OAAO,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAElBX,QAAQ,CAACM,SAAT,GACHC,UADG,CACQ,SADR,EAEHC,GAFG,CAECI,MAAM,CAACC,GAFR,EAGHC,GAHG,CAIF;AACEC,YAAAA,aAAa,EAAE;AACbC,cAAAA,IAAI,EAAJA,IADa;AAEbC,cAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,OAAX;AAFE;AADjB,WAJE,EAUF;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAVE,CAFkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\n\n\nexport const sendChatMessage = (chatID, chat) => {\n  console.log('chatid: ', chatID);\n  console.log('chat: ', chat);\n  firebase.firestore()\n    .collection('messages')\n    .doc(chatID)\n    .collection('chats')\n    .add({\n      chat: chat\n    });\n};\n\nexport const handleSend = async (messages) => {\n\n  await firebase.firestore()\n    .collection('THREADS')\n    .doc(thread._id)\n    .set(\n      {\n        latestMessage: {\n          text,\n          createdAt: new Date().getTime()\n        }\n      },\n      { merge: true }\n    );\n}"]},"metadata":{},"sourceType":"module"}