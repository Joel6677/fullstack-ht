{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nexport var uploadUserInfo = function uploadUserInfo(firstName, lastName, birthdate, bio) {\n  var currentUser, db;\n  return _regeneratorRuntime.async(function uploadUserInfo$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          try {\n            currentUser = firebase.auth().currentUser;\n            console.log('current user: ', currentUser);\n            db = firebase.firestore();\n            db.collection('users').doc(currentUser.uid).collection('userinfo').add({\n              firstname: firstName,\n              lastname: lastName,\n              birthdate: birthdate,\n              bio: bio\n            });\n          } catch (err) {\n            console.log('upload user info error: ', err);\n          }\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var SignUpWithEmail = function SignUpWithEmail(email, password) {\n  var currentUser, db;\n  return _regeneratorRuntime.async(function SignUpWithEmail$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(email, password));\n\n        case 3:\n          currentUser = firebase.auth().currentUser;\n          db = firebase.firestore();\n          db.collection('users').doc(currentUser.uid).set({\n            email: currentUser.email\n          });\n          return _context2.abrupt(\"return\", true);\n\n        case 9:\n          _context2.prev = 9;\n          _context2.t0 = _context2[\"catch\"](0);\n          Alert.alert('Error', \"\" + _context2.t0);\n          return _context2.abrupt(\"return\", false);\n\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 9]], Promise);\n};\nexport var SignInWithEmail = function SignInWithEmail(email, password) {\n  return _regeneratorRuntime.async(function SignInWithEmail$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(firebase.auth().signInWithEmailAndPassword(email, password));\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var SignInWithGoogle = function SignInWithGoogle() {\n  var provider;\n  return _regeneratorRuntime.async(function SignInWithGoogle$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          provider = new firebase.auth.GoogleAuthProvider();\n          _context4.next = 4;\n          return _regeneratorRuntime.awrap(firebase.auth().signInWithRedirect(provider));\n\n        case 4:\n          _context4.next = 9;\n          break;\n\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\nexport var SignInWithEmailLink = function SignInWithEmailLink(email) {\n  var actionCodeSettings;\n  return _regeneratorRuntime.async(function SignInWithEmailLink$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          actionCodeSettings = {\n            url: 'https://fullstack-project-31017.firebaseapp.com',\n            handleCodeInApp: true\n          };\n          firebase.auth().sendSignInLinkToEmail(email, actionCodeSettings).then(function () {\n            window.localStorage.setItem('emailForSignIn', email);\n          }).catch(function (error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(errorCode);\n            console.log(errorMessage);\n          });\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var SignInWithFacebook = function SignInWithFacebook() {\n  var provider;\n  return _regeneratorRuntime.async(function SignInWithFacebook$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          provider = new firebase.auth.FacebookAuthProvider();\n          _context6.next = 4;\n          return _regeneratorRuntime.awrap(firebase.auth().signInWithRedirect(provider));\n\n        case 4:\n          _context6.next = 9;\n          break;\n\n        case 6:\n          _context6.prev = 6;\n          _context6.t0 = _context6[\"catch\"](0);\n          console.log(_context6.t0);\n\n        case 9:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\nexport var SignInAnonymously = function SignInAnonymously() {\n  return _regeneratorRuntime.async(function SignInAnonymously$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return _regeneratorRuntime.awrap(firebase.auth().signInAnonymously());\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var SignOut = function SignOut() {\n  return _regeneratorRuntime.async(function SignOut$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          firebase.auth().currentUser ? console.log('Sign out: ', firebase.auth().currentUser) : console.log('Not signed in');\n          _context8.next = 4;\n          return _regeneratorRuntime.awrap(firebase.auth().signOut());\n\n        case 4:\n          _context8.next = 9;\n          break;\n\n        case 6:\n          _context8.prev = 6;\n          _context8.t0 = _context8[\"catch\"](0);\n          console.log(_context8.t0);\n\n        case 9:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\nexport var DeleteUser = function DeleteUser() {\n  var currentUser;\n  return _regeneratorRuntime.async(function DeleteUser$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          currentUser = firebase.auth().currentUser;\n          _context9.next = 3;\n          return _regeneratorRuntime.awrap(currentUser.delete());\n\n        case 3:\n          console.log('user deleted: ', currentUser);\n\n        case 4:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/firebase/firebaseFunctions.js"],"names":["firebase","uploadUserInfo","firstName","lastName","birthdate","bio","currentUser","auth","console","log","db","firestore","collection","doc","uid","add","firstname","lastname","err","SignUpWithEmail","email","password","createUserWithEmailAndPassword","set","Alert","alert","SignInWithEmail","signInWithEmailAndPassword","SignInWithGoogle","provider","GoogleAuthProvider","signInWithRedirect","SignInWithEmailLink","actionCodeSettings","url","handleCodeInApp","sendSignInLinkToEmail","then","window","localStorage","setItem","catch","error","errorCode","code","errorMessage","message","SignInWithFacebook","FacebookAuthProvider","SignInAnonymously","signInAnonymously","SignOut","signOut","DeleteUser","delete"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;;AAGA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAOC,SAAP,EAAkBC,QAAlB,EAA4BC,SAA5B,EAAuCC,GAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAE1B,cAAI;AAEMC,YAAAA,WAFN,GAEoBN,QAAQ,CAACO,IAAT,GAAgBD,WAFpC;AAGAE,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BH,WAA9B;AACMI,YAAAA,EAJN,GAIWV,QAAQ,CAACW,SAAT,EAJX;AAKAD,YAAAA,EAAE,CAACE,UAAH,CAAc,OAAd,EACKC,GADL,CACSP,WAAW,CAACQ,GADrB,EAEKF,UAFL,CAEgB,UAFhB,EAGKG,GAHL,CAGS;AACDC,cAAAA,SAAS,EAAEd,SADV;AAEDe,cAAAA,QAAQ,EAAEd,QAFT;AAGDC,cAAAA,SAAS,EAAEA,SAHV;AAIDC,cAAAA,GAAG,EAAEA;AAJJ,aAHT;AASH,WAdD,CAcE,OAAOa,GAAP,EAAY;AACVV,YAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCS,GAAxC;AACH;;AAlByB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;AAsBP,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAOC,KAAP,EAAcC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEjBrB,QAAQ,CAACO,IAAT,GAAgBe,8BAAhB,CAA+CF,KAA/C,EAAsDC,QAAtD,CAFiB;;AAAA;AAGjBf,UAAAA,WAHiB,GAGHN,QAAQ,CAACO,IAAT,GAAgBD,WAHb;AAIjBI,UAAAA,EAJiB,GAIZV,QAAQ,CAACW,SAAT,EAJY;AAMvBD,UAAAA,EAAE,CAACE,UAAH,CAAc,OAAd,EACKC,GADL,CACSP,WAAW,CAACQ,GADrB,EAEKS,GAFL,CAES;AACDH,YAAAA,KAAK,EAAEd,WAAW,CAACc;AADlB,WAFT;AANuB,4CAWhB,IAXgB;;AAAA;AAAA;AAAA;AAevBI,UAAAA,KAAK,CAACC,KAAN,CACI,OADJ;AAfuB,4CAoBhB,KApBgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AA+CP,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAON,KAAP,EAAcC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACrBrB,QAAQ,CAACO,IAAT,GAAgBoB,0BAAhB,CAA2CP,KAA3C,EAAkDC,QAAlD,CADqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AAIP,OAAO,IAAMO,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGlBC,UAAAA,QAHkB,GAGP,IAAI7B,QAAQ,CAACO,IAAT,CAAcuB,kBAAlB,EAHO;AAAA;AAAA,2CAIlB9B,QAAQ,CAACO,IAAT,GAAgBwB,kBAAhB,CAAmCF,QAAnC,CAJkB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMxBrB,UAAAA,OAAO,CAACC,GAAR;;AANwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAzB;AAWP,OAAO,IAAMuB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAOZ,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEzBa,UAAAA,kBAFyB,GAEJ;AACvBC,YAAAA,GAAG,EAAE,iDADkB;AAEvBC,YAAAA,eAAe,EAAE;AAFM,WAFI;AAO/BnC,UAAAA,QAAQ,CAACO,IAAT,GAAgB6B,qBAAhB,CAAsChB,KAAtC,EAA6Ca,kBAA7C,EACDI,IADC,CACI,YAAM;AAIVC,YAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,EAA8CpB,KAA9C;AAED,WAPC,EAQDqB,KARC,CAQK,UAACC,KAAD,EAAW;AAChB,gBAAIC,SAAS,GAAGD,KAAK,CAACE,IAAtB;AACA,gBAAIC,YAAY,GAAGH,KAAK,CAACI,OAAzB;AACAtC,YAAAA,OAAO,CAACC,GAAR,CAAYkC,SAAZ;AACAnC,YAAAA,OAAO,CAACC,GAAR,CAAYoC,YAAZ;AACD,WAbC;;AAP+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA5B;AAyBP,OAAO,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGpBlB,UAAAA,QAHoB,GAGT,IAAI7B,QAAQ,CAACO,IAAT,CAAcyC,oBAAlB,EAHS;AAAA;AAAA,2CAIpBhD,QAAQ,CAACO,IAAT,GAAgBwB,kBAAhB,CAAmCF,QAAnC,CAJoB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAM1BrB,UAAAA,OAAO,CAACC,GAAR;;AAN0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;AAWP,OAAO,IAAMwC,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACvBjD,QAAQ,CAACO,IAAT,GAAgB2C,iBAAhB,EADuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA1B;AAKP,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAGfnD,UAAAA,QAAQ,CAACO,IAAT,GAAgBD,WAAhB,GAA8BE,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BT,QAAQ,CAACO,IAAT,GAAgBD,WAA1C,CAA9B,GAAuFE,OAAO,CAACC,GAAR,CAAY,eAAZ,CAAvF;AAHe;AAAA,2CAITT,QAAQ,CAACO,IAAT,GAAgB6C,OAAhB,EAJS;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMf5C,UAAAA,OAAO,CAACC,GAAR;;AANe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;AAUP,OAAO,IAAM4C,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAChB/C,UAAAA,WADgB,GACFN,QAAQ,CAACO,IAAT,GAAgBD,WADd;AAAA;AAAA,2CAGhBA,WAAW,CAACgD,MAAZ,EAHgB;;AAAA;AAKtB9C,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BH,WAA9B;;AALsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport { Alert } from 'react-native';\n\nexport const uploadUserInfo = async (firstName, lastName, birthdate, bio) => {\n\n    try {\n\n        const currentUser = firebase.auth().currentUser;\n        console.log('current user: ', currentUser);\n        const db = firebase.firestore();\n        db.collection('users')\n            .doc(currentUser.uid)\n            .collection('userinfo')\n            .add({\n                firstname: firstName,\n                lastname: lastName,\n                birthdate: birthdate,\n                bio: bio\n            });\n    } catch (err) {\n        console.log('upload user info error: ', err);\n    }\n\n};\n\nexport const SignUpWithEmail = async (email, password) => {\n    try {\n        await firebase.auth().createUserWithEmailAndPassword(email, password);\n        const currentUser = firebase.auth().currentUser;\n        const db = firebase.firestore();\n\n        db.collection('users')\n            .doc(currentUser.uid)\n            .set({\n                email: currentUser.email\n            });\n        return true;\n\n    } catch (err) {\n\n        Alert.alert(\n            'Error',\n            `${err}`\n        );\n\n        return false;\n    }\n};\n\n// export const emailVerificationLink = async () => {\n\n//     const useremail = firebase.auth().currentUser.email;\n\n//     const actionCodeSettings = {\n//         // URL you want to redirect back to. The domain (www.example.com) for this\n//         // URL must be in the authorized domains list in the Firebase Console.\n//         url: 'https://fullstack-project-31017.firebaseapp.com',\n//         // This must be true.\n//         handleCodeInApp: true\n//     };\n\n//     try {\n//         const link = await admin.auth().generateEmailVerificationLink(useremail, actionCodeSettings);\n//         return await admin.auth().sendCustomVerificationEmail(useremail, link);\n//     } catch (error) {\n//         console.log(error);\n//     }\n\n\n\n// };\n\nexport const SignInWithEmail = async (email, password) => {\n    await firebase.auth().signInWithEmailAndPassword(email, password);\n};\n\nexport const SignInWithGoogle = async () => {\n\n    try {\n        const provider = new firebase.auth.GoogleAuthProvider();\n        await firebase.auth().signInWithRedirect(provider);\n    } catch (err) {\n        console.log(err);\n    }\n\n};\n\nexport const SignInWithEmailLink = async (email) => {\n\n    const actionCodeSettings = {\n        url: 'https://fullstack-project-31017.firebaseapp.com',\n        handleCodeInApp: true\n    };\n\n    firebase.auth().sendSignInLinkToEmail(email, actionCodeSettings)\n  .then(() => {\n    // The link was successfully sent. Inform the user.\n    // Save the email locally so you don't need to ask the user for it again\n    // if they open the link on the same device.\n    window.localStorage.setItem('emailForSignIn', email);\n    // ...\n  })\n  .catch((error) => {\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    console.log(errorCode);\n    console.log(errorMessage);\n  });\n\n\n};\n\nexport const SignInWithFacebook = async () => {\n    try {\n\n        const provider = new firebase.auth.FacebookAuthProvider();\n        await firebase.auth().signInWithRedirect(provider);\n    } catch (err) {\n        console.log(err);\n    }\n\n};\n\nexport const SignInAnonymously = async () => {\n    await firebase.auth().signInAnonymously();\n\n};\n\nexport const SignOut = async () => {\n\n    try {\n        firebase.auth().currentUser ? console.log('Sign out: ', firebase.auth().currentUser) : console.log('Not signed in');\n        await firebase.auth().signOut();\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nexport const DeleteUser = async () => {\n    const currentUser = firebase.auth().currentUser;\n\n    await currentUser.delete();\n\n    console.log('user deleted: ', currentUser);\n};\n"]},"metadata":{},"sourceType":"module"}