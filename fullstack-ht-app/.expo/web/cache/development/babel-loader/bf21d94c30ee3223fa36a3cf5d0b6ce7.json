{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/MyReviews.jsx\";\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ReviewItem from \"./ReviewItem\";\nvar styles = StyleSheet.create({\n  reviewItemWrapper: {\n    padding: 15,\n    backgroundColor: 'white'\n  },\n  separator: {\n    height: 10\n  },\n  actionsContainer: {\n    marginTop: 15,\n    flexDirection: 'row'\n  },\n  actionButton: {\n    flexGrow: 1,\n    marginRight: 15\n  },\n  lastActionButton: {\n    marginRight: 0\n  }\n});\n\nvar ReviewItemWithActions = function ReviewItemWithActions(_ref) {\n  var review = _ref.review,\n      onDelete = _ref.onDelete;\n  return React.createElement(View, null, React.createElement(ReviewItem, {\n    review: review\n  }));\n};\n\nvar ItemSeparator = function ItemSeparator() {\n  return React.createElement(View, {\n    style: styles.separator\n  });\n};\n\nvar MyReviews = function MyReviews() {\n  var _useAuthorizedUser = useAuthorizedUser({\n    includeReviews: true\n  }),\n      authorizedUser = _useAuthorizedUser.authorizedUser,\n      refetch = _useAuthorizedUser.refetch;\n\n  var _useMutation = useMutation(DELETE_REVIEW),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deleteReview = _useMutation2[0];\n\n  var reviewEdges = authorizedUser ? authorizedUser.reviews.edges : [];\n  var reviewNodes = reviewEdges.map(function (_ref2) {\n    var node = _ref2.node;\n    return node;\n  });\n\n  var _onDelete = function onDelete(id) {\n    return _regeneratorRuntime.async(function onDelete$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(deleteReview({\n              variables: {\n                id: id\n              }\n            }));\n\n          case 2:\n            refetch();\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(FlatList, {\n    data: reviewNodes,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(ReviewItemWithActions, {\n        review: item,\n        onDelete: function onDelete() {\n          return _onDelete(item.id);\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(_ref4) {\n      var id = _ref4.id;\n      return id;\n    },\n    ItemSeparatorComponent: ItemSeparator\n  });\n};\n\nexport default MyReviews;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/MyReviews.jsx"],"names":["React","ReviewItem","styles","StyleSheet","create","reviewItemWrapper","padding","backgroundColor","separator","height","actionsContainer","marginTop","flexDirection","actionButton","flexGrow","marginRight","lastActionButton","ReviewItemWithActions","review","onDelete","ItemSeparator","MyReviews","useAuthorizedUser","includeReviews","authorizedUser","refetch","useMutation","DELETE_REVIEW","deleteReview","reviewEdges","reviews","edges","reviewNodes","map","node","id","variables","item"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;AAKA,OAAOC,UAAP;AAKA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,iBAAiB,EAAE;AACjBC,IAAAA,OAAO,EAAE,EADQ;AAEjBC,IAAAA,eAAe,EAAE;AAFA,GADY;AAK/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAE;AADC,GALoB;AAQ/BC,EAAAA,gBAAgB,EAAE;AAChBC,IAAAA,SAAS,EAAE,EADK;AAEhBC,IAAAA,aAAa,EAAE;AAFC,GARa;AAY/BC,EAAAA,YAAY,EAAE;AACZC,IAAAA,QAAQ,EAAE,CADE;AAEZC,IAAAA,WAAW,EAAE;AAFD,GAZiB;AAgB/BC,EAAAA,gBAAgB,EAAE;AAChBD,IAAAA,WAAW,EAAE;AADG;AAhBa,CAAlB,CAAf;;AAuBA,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,OAA0B;AAAA,MAAvBC,MAAuB,QAAvBA,MAAuB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AACtD,SACE,oBAAC,IAAD,QACI,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAED;AAApB,IADJ,CADF;AAKD,CAND;;AAQA,IAAME,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAElB,MAAM,CAACM;AAApB,IAAN;AAAA,CAAtB;;AAEA,IAAMa,SAAS,GAAG,SAAZA,SAAY,GAAM;AAAA,2BACcC,iBAAiB,CAAC;AACpDC,IAAAA,cAAc,EAAE;AADoC,GAAD,CAD/B;AAAA,MACdC,cADc,sBACdA,cADc;AAAA,MACEC,OADF,sBACEA,OADF;;AAAA,qBAKCC,WAAW,CAACC,aAAD,CALZ;AAAA;AAAA,MAKfC,YALe;;AAMtB,MAAMC,WAAW,GAAGL,cAAc,GAAGA,cAAc,CAACM,OAAf,CAAuBC,KAA1B,GAAkC,EAApE;AACA,MAAMC,WAAW,GAAGH,WAAW,CAACI,GAAZ,CAAgB;AAAA,QAAGC,IAAH,SAAGA,IAAH;AAAA,WAAcA,IAAd;AAAA,GAAhB,CAApB;;AAEA,MAAMf,SAAQ,GAAG,SAAXA,QAAW,CAAOgB,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACTP,YAAY,CAAC;AAAEQ,cAAAA,SAAS,EAAE;AAAED,gBAAAA,EAAE,EAAFA;AAAF;AAAb,aAAD,CADH;;AAAA;AAEfV,YAAAA,OAAO;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAKA,SACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEO,WADR;AAEE,IAAA,UAAU,EAAE;AAAA,UAAGK,IAAH,SAAGA,IAAH;AAAA,aACV,oBAAC,qBAAD;AACE,QAAA,MAAM,EAAEA,IADV;AAEE,QAAA,QAAQ,EAAE;AAAA,iBAAMlB,SAAQ,CAACkB,IAAI,CAACF,EAAN,CAAd;AAAA;AAFZ,QADU;AAAA,KAFd;AAQE,IAAA,YAAY,EAAE;AAAA,UAAGA,EAAH,SAAGA,EAAH;AAAA,aAAYA,EAAZ;AAAA,KARhB;AASE,IAAA,sBAAsB,EAAEf;AAT1B,IADF;AAaD,CA3BD;;AA6BA,eAAeC,SAAf","sourcesContent":["import React from 'react';\nimport { FlatList, View, StyleSheet, Alert } from 'react-native';\n// import { Link } from 'react-router-native';\n// import { useMutation } from '@apollo/react-hooks';\n\nimport ReviewItem from './ReviewItem';\n// import Button from './Button';\n// import useAuthorizedUser from '../hooks/useAuthorizedUser';\n// import { DELETE_REVIEW } from '../graphql/mutations';\n\nconst styles = StyleSheet.create({\n  reviewItemWrapper: {\n    padding: 15,\n    backgroundColor: 'white',\n  },\n  separator: {\n    height: 10,\n  },\n  actionsContainer: {\n    marginTop: 15,\n    flexDirection: 'row',\n  },\n  actionButton: {\n    flexGrow: 1,\n    marginRight: 15,\n  },\n  lastActionButton: {\n    marginRight: 0,\n  },\n});\n\n\n\nconst ReviewItemWithActions = ({ review, onDelete }) => {\n  return (\n    <View>\n        <ReviewItem review={review}/>        \n    </View>\n  );\n};\n\nconst ItemSeparator = () => <View style={styles.separator} />;\n\nconst MyReviews = () => {\n  const { authorizedUser, refetch } = useAuthorizedUser({\n    includeReviews: true,\n  });\n\n  const [deleteReview] = useMutation(DELETE_REVIEW);\n  const reviewEdges = authorizedUser ? authorizedUser.reviews.edges : [];\n  const reviewNodes = reviewEdges.map(({ node }) => node);\n\n  const onDelete = async (id) => {\n    await deleteReview({ variables: { id } });\n    refetch();\n  };\n\n  return (\n    <FlatList\n      data={reviewNodes}\n      renderItem={({ item }) => (\n        <ReviewItemWithActions\n          review={item}\n          onDelete={() => onDelete(item.id)}\n        />\n      )}\n      keyExtractor={({ id }) => id}\n      ItemSeparatorComponent={ItemSeparator}\n    />\n  );\n};\n\nexport default MyReviews;"]},"metadata":{},"sourceType":"module"}