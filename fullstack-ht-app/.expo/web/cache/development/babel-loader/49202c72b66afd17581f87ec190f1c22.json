{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as firebase from 'firebase';\nexport var sendChatMessage = function sendChatMessage(chatID, text) {\n  var userinfo;\n  return _regeneratorRuntime.async(function sendChatMessage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(firebase.firestore().collection('userinfo').doc(firebase.auth().currentUser.uid).get());\n\n        case 2:\n          userinfo = _context.sent;\n          console.log('userinfo: ', userinfo);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(firebase.firestore().collection('messages').doc(chatID).collection('chats').add({\n            text: text,\n            createdAt: new Date().getTime(),\n            user: {\n              _id: firebase.auth().currentUser.uid,\n              email: firebase.auth().currentUser.email,\n              name: userinfo.name\n            }\n          }));\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/firebase/chat.js"],"names":["firebase","sendChatMessage","chatID","text","firestore","collection","doc","auth","currentUser","uid","get","userinfo","console","log","add","createdAt","Date","getTime","user","_id","email","name"],"mappings":";AAAA,OAAO,KAAKA,QAAZ,MAA0B,UAA1B;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAOC,MAAP,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAENH,QAAQ,CAACI,SAAT,GACpBC,UADoB,CACT,UADS,EAEpBC,GAFoB,CAEhBN,QAAQ,CAACO,IAAT,GAAgBC,WAAhB,CAA4BC,GAFZ,EAGpBC,GAHoB,EAFM;;AAAA;AAEvBC,UAAAA,QAFuB;AAO7BC,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,QAA1B;AAP6B;AAAA,2CASvBX,QAAQ,CAACI,SAAT,GACHC,UADG,CACQ,UADR,EAEHC,GAFG,CAECJ,MAFD,EAGHG,UAHG,CAGQ,OAHR,EAIHS,GAJG,CAIC;AACHX,YAAAA,IAAI,EAAEA,IADH;AAEHY,YAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFR;AAGHC,YAAAA,IAAI,EAAE;AACJC,cAAAA,GAAG,EAAEnB,QAAQ,CAACO,IAAT,GAAgBC,WAAhB,CAA4BC,GAD7B;AAEJW,cAAAA,KAAK,EAAEpB,QAAQ,CAACO,IAAT,GAAgBC,WAAhB,CAA4BY,KAF/B;AAGJC,cAAAA,IAAI,EAAEV,QAAQ,CAACU;AAHX;AAHH,WAJD,CATuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB","sourcesContent":["import * as firebase from 'firebase';\n\nexport const sendChatMessage = async (chatID, text) => {\n\n  const userinfo = await firebase.firestore()\n    .collection('userinfo')\n    .doc(firebase.auth().currentUser.uid)\n    .get();\n\n  console.log('userinfo: ', userinfo);\n\n  await firebase.firestore()\n    .collection('messages')\n    .doc(chatID)\n    .collection('chats')\n    .add({\n      text: text,\n      createdAt: new Date().getTime(),\n      user: {\n        _id: firebase.auth().currentUser.uid,\n        email: firebase.auth().currentUser.email,\n        name: userinfo.name\n      }\n    });\n};\n"]},"metadata":{},"sourceType":"module"}