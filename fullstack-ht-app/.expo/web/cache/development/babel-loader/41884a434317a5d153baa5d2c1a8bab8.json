{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/SideMenu.jsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, Divider, Drawer, useTheme } from 'react-native-paper';\nimport { useHistory } from 'react-router-native';\nimport firebase from 'firebase/app';\nimport Text from \"./Text\";\nimport { StateContext } from \"../state\";\nimport CustomButton from \"./CustomButton\";\nimport 'firebase/auth';\nimport 'firebase/firestore';\nvar styles = StyleSheet.create({\n  sidebar: {\n    width: Dimensions.get('window').width * 0.85,\n    height: '100%',\n    zIndex: 4,\n    position: 'absolute'\n  },\n  topContainer: {\n    width: '100%',\n    justifyContent: 'space-evenly',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  nameText: {\n    marginRight: 10\n  },\n  buttonContainer: {\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'space-around'\n  },\n  closeMenu: {\n    backgroundColor: 'grey',\n    width: '100%',\n    height: '100%'\n  },\n  drawerSection: {\n    padding: 5\n  },\n  sidemenuButtons: {\n    top: 50,\n    zIndex: 5,\n    alignItems: 'flex-start'\n  },\n  button: {\n    padding: 10\n  },\n  avatar: {\n    width: 60,\n    height: 60,\n    borderRadius: 50\n  },\n  divider: {\n    zIndex: 5,\n    marginTop: 10,\n    width: '100%'\n  }\n});\n\nvar SideMenu = function SideMenu() {\n  var toggleAnim = useRef(new Animated.Value(Dimensions.get('window').width * -0.85)).current;\n  var fadeAnim = useRef(new Animated.Value(0)).current;\n\n  var _useContext = useContext(StateContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var history = useHistory();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      img = _useState2[0],\n      setImg = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      username = _useState4[0],\n      setUsername = _useState4[1];\n\n  var _useTheme = useTheme(),\n      colors = _useTheme.colors;\n\n  var route = function route(_route, number) {\n    setActive(number);\n    history.push(_route);\n    dispatch({\n      type: 'SET_OPEN',\n      payload: !state.open\n    });\n  };\n\n  var moveMenu = function moveMenu() {\n    Animated.timing(toggleAnim, {\n      toValue: state.open ? 0 : Dimensions.get('window').width * -0.85,\n      useNativeDriver: true,\n      duration: 300\n    }).start();\n  };\n\n  var fade = function fade() {\n    Animated.timing(fadeAnim, {\n      toValue: state.open ? 0.5 : 0,\n      duration: 300,\n      useNativeDriver: true\n    }).start();\n  };\n\n  useEffect(function () {\n    moveMenu();\n    fade();\n\n    var fetchData = function fetchData() {\n      var profpic, uinfo;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = firebase.auth().currentUser;\n\n              if (!_context.t0) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(firebase.firestore().collection('images').doc(firebase.auth().currentUser.uid).collection('userImages').doc('profilePicture').get());\n\n            case 4:\n              _context.t0 = _context.sent;\n\n            case 5:\n              profpic = _context.t0;\n              setImg(profpic.data().downloadURL);\n              _context.t1 = firebase.auth().currentUser;\n\n              if (!_context.t1) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(firebase.firestore().collection('userinfo').doc(firebase.auth().currentUser.uid).get());\n\n            case 11:\n              _context.t1 = _context.sent;\n\n            case 12:\n              uinfo = _context.t1;\n              setUsername(uinfo.data().name);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchData();\n  }, [state.open]);\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      active = _useState6[0],\n      setActive = _useState6[1];\n\n  console.log('currentUser: ', firebase.auth().currentUser);\n  return React.createElement(React.Fragment, null, React.createElement(Animated.View, {\n    style: [styles.sidebar, {\n      backgroundColor: colors.primary\n    }, {\n      transform: [{\n        translateX: toggleAnim\n      }]\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.sidemenuButtons,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, firebase.auth().currentUser && React.createElement(View, {\n    style: styles.topContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: {\n      uri: img\n    },\n    style: styles.avatar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.nameText,\n    fontSize: 'subheading',\n    color: 'textSecondary',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, username, ' ', \"logged in\")), React.createElement(View, {\n    style: styles.buttonContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, !firebase.auth().currentUser && React.createElement(Button, {\n    style: styles.button,\n    raised: true,\n    theme: {\n      colors: {\n        primary: '#FFFFFF'\n      }\n    },\n    mode: \"outlined\",\n    onPress: function onPress() {\n      return route('sign-up');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 46\n    }\n  }, \"Sign up\"), !firebase.auth().currentUser && React.createElement(Button, {\n    style: styles.button,\n    raised: true,\n    theme: {\n      colors: {\n        primary: '#FFFFFF'\n      }\n    },\n    mode: \"outlined\",\n    onPress: function onPress() {\n      return route('/sign-in-email');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 46\n    }\n  }, \"Sign in\")), React.createElement(Divider, {\n    style: styles.divider,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }), React.createElement(Drawer.Section, {\n    style: styles.drawerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"upload\",\n    label: \"Upload new whisky\",\n    active: active === 'first',\n    onPress: function onPress() {\n      return route('/upload-whisky', 'first');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  })), React.createElement(Drawer.Section, {\n    style: (styles.drawerSection, {}),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"glass-tulip\",\n    label: \"Collections\",\n    active: active === 'second',\n    onPress: function onPress() {\n      return route('/collections', 'second');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  })), React.createElement(Drawer.Section, {\n    style: styles.drawerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"account\",\n    label: \"Profile\",\n    active: active === 'third',\n    onPress: function onPress() {\n      return route('/userpage', 'third');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  })), React.createElement(Drawer.Section, {\n    style: styles.drawerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"account-multiple\",\n    label: \"Users\",\n    active: active === 'fourth',\n    onPress: function onPress() {\n      return route('/userlist', 'fourth');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  })), React.createElement(Drawer.Section, {\n    style: styles.drawerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"forum\",\n    label: \"Posts\",\n    active: active === 'fifth',\n    onPress: function onPress() {\n      return route('/posts', 'fifth');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  })), React.createElement(Drawer.Section, {\n    style: styles.drawerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, React.createElement(Drawer.Item, {\n    icon: \"upload\",\n    label: \"Upload post\",\n    active: active === 'sixdth',\n    onPress: function onPress() {\n      return route('/upload-post', 'sixdth');\n    },\n    raised: true,\n    theme: {\n      colors: {\n        text: '#FFFFFF',\n        primary: '#FFFFFF'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  })))), React.createElement(Animated.View, {\n    style: [styles.closeMenu, {\n      opacity: fadeAnim,\n      zIndex: state.open ? 3 : 0\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, state.open && React.createElement(CustomButton, {\n    style: {\n      height: '100%',\n      borderRadius: 0\n    },\n    color: \"\",\n    onPress: function onPress() {\n      return dispatch({\n        type: 'SET_OPEN',\n        payload: !state.open\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 14\n    }\n  })));\n};\n\nexport default SideMenu;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/SideMenu.jsx"],"names":["React","useContext","useEffect","useRef","useState","Button","Divider","Drawer","useTheme","useHistory","firebase","Text","StateContext","CustomButton","styles","StyleSheet","create","sidebar","width","Dimensions","get","height","zIndex","position","topContainer","justifyContent","flexDirection","alignItems","nameText","marginRight","buttonContainer","closeMenu","backgroundColor","drawerSection","padding","sidemenuButtons","top","button","avatar","borderRadius","divider","marginTop","SideMenu","toggleAnim","Animated","Value","current","fadeAnim","state","dispatch","history","img","setImg","username","setUsername","colors","route","number","setActive","push","type","payload","open","moveMenu","timing","toValue","useNativeDriver","duration","start","fade","fetchData","auth","currentUser","firestore","collection","doc","uid","profpic","data","downloadURL","uinfo","name","active","console","log","primary","transform","translateX","uri","text","opacity"],"mappings":"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","sourcesContent":["import React, {\n  useContext, useEffect, useRef, useState,\n} from 'react';\nimport {\n  Animated, StyleSheet, View, Dimensions, Image,\n} from 'react-native';\nimport {\n  Button, Divider, Drawer, useTheme,\n} from 'react-native-paper';\nimport { useHistory } from 'react-router-native';\nimport firebase from 'firebase/app';\nimport Text from './Text';\n\nimport { StateContext } from '../state';\nimport CustomButton from './CustomButton';\n// import * as firebase from 'firebase';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nconst styles = StyleSheet.create({\n  sidebar: {\n    width: Dimensions.get('window').width * 0.85,\n    height: '100%',\n    // backgroundColor: theme.colors.primary,\n    zIndex: 4,\n    position: 'absolute',\n  },\n  topContainer: {\n    width: '100%',\n    justifyContent: 'space-evenly',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  nameText: {\n    marginRight: 10,\n  },\n  buttonContainer: {\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  closeMenu: {\n    backgroundColor: 'grey',\n    width: '100%',\n    height: '100%',\n  },\n  drawerSection: {\n    padding: 5,\n  },\n  sidemenuButtons: {\n    top: 50,\n    zIndex: 5,\n    alignItems: 'flex-start',\n  },\n  button: {\n    padding: 10,\n  },\n  avatar: {\n    width: 60,\n    height: 60,\n    borderRadius: 50,\n  },\n  divider: {\n    zIndex: 5,\n    marginTop: 10,\n    width: '100%',\n  },\n});\n\nconst SideMenu = () => {\n  const toggleAnim = useRef(new Animated.Value(Dimensions.get('window').width * -0.85)).current;\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const { state, dispatch } = useContext(StateContext);\n  const history = useHistory();\n  const [img, setImg] = useState('');\n  const [username, setUsername] = useState('');\n  const { colors } = useTheme();\n\n  const route = (route, number) => {\n    setActive(number);\n    history.push(route);\n    dispatch({ type: 'SET_OPEN', payload: !state.open });\n  };\n\n  const moveMenu = () => {\n    Animated.timing(\n      toggleAnim,\n      {\n        toValue: state.open ? 0 : Dimensions.get('window').width * -0.85,\n        useNativeDriver: true,\n        duration: 300,\n      },\n    ).start();\n  };\n\n  const fade = () => {\n    Animated.timing(\n      fadeAnim,\n      {\n        toValue: state.open ? 0.5 : 0,\n        duration: 300,\n        useNativeDriver: true,\n      },\n    ).start();\n  };\n\n  useEffect(() => {\n    moveMenu();\n    fade();\n\n    const fetchData = async () => {\n      const profpic =  firebase.auth().currentUser && await firebase.firestore()\n      .collection('images')\n      .doc(firebase.auth().currentUser.uid)\n      .collection('userImages')\n      .doc('profilePicture')\n      .get()\n\n      setImg(profpic.data().downloadURL)\n\n      const uinfo = firebase.auth().currentUser && await firebase.firestore()\n      .collection('userinfo')\n      .doc(firebase.auth().currentUser.uid)\n      .get()\n\n      setUsername(uinfo.data().name)\n    \n    }\n\n    fetchData()\n    // { firebase.auth().currentUser && firebase.firestore()\n    //   .collection('images')\n    //   .doc(firebase.auth().currentUser.uid)\n    //   .collection('userImages')\n    //   .doc('profilePicture')\n    //   .get()\n    //   .then((snapshot) => {\n    //     setImg(snapshot.data().downloadURL);\n    //   }); }\n    // { firebase.auth().currentUser && firebase.firestore()\n    //   .collection('userinfo')\n    //   .doc(firebase.auth().currentUser.uid)\n    //   .get()\n    //   .then((snapshot) => {\n    //     setUsername(snapshot.data().name);\n    //   }); }\n  }, [state.open]);\n\n  const [active, setActive] = useState('');\n\n  console.log('currentUser: ', firebase.auth().currentUser);\n\n  return (\n    <>\n      <Animated.View style={[styles.sidebar, { backgroundColor: colors.primary }, {\n        transform: [{\n          translateX: toggleAnim,\n        }],\n      }]}\n      >\n        <View style={styles.sidemenuButtons}>\n\n          {firebase.auth().currentUser && (\n          <View style={styles.topContainer}>\n            <Image source={{ uri: img }} style={styles.avatar} />\n            <Text style={styles.nameText} fontSize={'subheading'} color={'textSecondary'}>\n              {username}\n              {' '}\n              logged in\n            </Text>\n          </View>\n          )}\n\n          <View style={styles.buttonContainer}>\n            {!firebase.auth().currentUser && <Button style={styles.button} raised theme={{ colors: { primary: '#FFFFFF' } }} mode=\"outlined\" onPress={() => route('sign-up')}>Sign up</Button>}\n            {!firebase.auth().currentUser && <Button style={styles.button} raised theme={{ colors: { primary: '#FFFFFF' } }} mode=\"outlined\" onPress={() => route('/sign-in-email')}>Sign in</Button>}\n          </View>\n\n          <Divider style={styles.divider} />\n          <Drawer.Section style={styles.drawerSection}>\n            <Drawer.Item\n              icon=\"upload\"\n              label=\"Upload new whisky\"\n              active={active === 'first'}\n              onPress={() => route('/upload-whisky', 'first')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n          <Drawer.Section style={styles.drawerSection, {}}>\n            <Drawer.Item\n              icon=\"glass-tulip\"\n              label=\"Collections\"\n              active={active === 'second'}\n              onPress={() => route('/collections', 'second')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n          <Drawer.Section style={styles.drawerSection}>\n            <Drawer.Item\n              icon=\"account\"\n              label=\"Profile\"\n              active={active === 'third'}\n              onPress={() => route('/userpage', 'third')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n          <Drawer.Section style={styles.drawerSection}>\n            <Drawer.Item\n              icon=\"account-multiple\"\n              label=\"Users\"\n              active={active === 'fourth'}\n              onPress={() => route('/userlist', 'fourth')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n          <Drawer.Section style={styles.drawerSection}>\n            <Drawer.Item\n              icon=\"forum\"\n              label=\"Posts\"\n              active={active === 'fifth'}\n              onPress={() => route('/posts', 'fifth')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n\n          <Drawer.Section style={styles.drawerSection}>\n            <Drawer.Item\n              icon=\"upload\"\n              label=\"Upload post\"\n              active={active === 'sixdth'}\n              onPress={() => route('/upload-post', 'sixdth')}\n              raised\n              theme={{ colors: { text: '#FFFFFF', primary: '#FFFFFF' } }}\n            />\n          </Drawer.Section>\n\n        </View>\n      </Animated.View>\n      <Animated.View\n        style={[styles.closeMenu, { opacity: fadeAnim, zIndex: state.open ? 3 : 0 }]}\n      >\n        {state.open\n          && <CustomButton style={{ height: '100%', borderRadius: 0 }} color=\"\" onPress={() => dispatch({ type: 'SET_OPEN', payload: !state.open })} /> }\n\n      </Animated.View>\n    </>\n  );\n};\n\nexport default SideMenu;\n"]},"metadata":{},"sourceType":"module"}