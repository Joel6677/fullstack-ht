{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/UploadWhisky.jsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useContext } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport { useHistory } from 'react-router-native';\nimport uuid from 'uuid';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Button, Checkbox, Snackbar } from 'react-native-paper';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport firebase from 'firebase/app';\nimport Moment from 'moment';\nimport Text from \"./Text\";\nimport FormikTextInput from \"./FormikTextInput\";\nimport { StateContext } from \"../state\";\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport theme from \"../theme\";\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    paddingVertical: 80,\n    zIndex: 1\n  },\n  fieldContainer: {\n    margin: 5\n  },\n  heading: {\n    alignItems: 'center',\n    marginBottom: 10\n  },\n  buttonContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    borderColor: '#aab2bb',\n    margin: 5\n  },\n  textContainer: {\n    fontSize: theme.fontSizes.body,\n    fontFamily: theme.fonts.main,\n    color: '#A6ACAF'\n  },\n  textContainer2: {\n    fontSize: theme.fontSizes.body,\n    fontFamily: theme.fonts.main,\n    marginTop: 9,\n    color: '#A6ACAF'\n  },\n  checkboxContainer: {\n    flexDirection: 'row',\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    borderColor: '#aab2bb',\n    margin: 5\n  }\n});\nvar initialValues = {\n  distillery: '',\n  brand: '',\n  nameAddition: '',\n  country: '',\n  region: '',\n  category: '',\n  age: '',\n  abv: '',\n  bottleSize: '',\n  bottler: '',\n  series: '',\n  description: '',\n  caskType: '',\n  caskNumber: '',\n  numberOfBottles: ''\n};\nvar validationSchema = yup.object().shape({\n  distillery: yup.string().required('Distillery is required'),\n  brand: yup.string().required('Brand is required'),\n  nameAddition: yup.string(),\n  country: yup.string().required('Country is required'),\n  region: yup.string(),\n  category: yup.string().required('Category is required'),\n  age: yup.number(),\n  abv: yup.number().min(0, 'Abv must be non negative number').max(100, 'Abv can be atmost 100').required('Abv is required'),\n  bottleSize: yup.number().required('Bottlesize is required'),\n  bottler: yup.string(),\n  series: yup.string(),\n  description: yup.string(),\n  caskType: yup.string(),\n  caskNumber: yup.number(),\n  numberOfBottles: yup.number()\n});\n\nvar UploadWhiskyForm = function UploadWhiskyForm(_ref) {\n  var onSubmit = _ref.onSubmit,\n      pickProfilePicFromLibrary = _ref.pickProfilePicFromLibrary,\n      distillationPressed = _ref.distillationPressed,\n      bottlingPressed = _ref.bottlingPressed,\n      distillationDate = _ref.distillationDate,\n      bottlingDate = _ref.bottlingDate;\n\n  var _useContext = useContext(StateContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var distillationDateText = distillationPressed ? Moment(distillationDate).format('DD-MM-YYYY') : 'Distillation date';\n  var bottlingDateText = bottlingPressed ? Moment(bottlingDate).format('DD-MM-YYYY') : 'Bottling date';\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"distillery\",\n    placeholder: \"Distillery\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"brand\",\n    placeholder: \"Brand\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"nameAddition\",\n    placeholder: \"Name addition\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"country\",\n    placeholder: \"Country\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"region\",\n    placeholder: \"Region\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"category\",\n    placeholder: \"Category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"age\",\n    keyboardType: \"numeric\",\n    placeholder: \"Age\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"abv\",\n    keyboardType: \"numeric\",\n    placeholder: \"Abv\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"bottleSize\",\n    keyboardType: \"numeric\",\n    placeholder: \"Bottlesize (Liter)\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"bottler\",\n    placeholder: \"Bottler\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"series\",\n    placeholder: \"Series\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"caskType\",\n    placeholder: \"Cask Type\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"caskNumber\",\n    keyboardType: \"numeric\",\n    placeholder: \"Cask Number\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"numberOfBottles\",\n    keyboardType: \"numeric\",\n    placeholder: \"Number of bottles\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, React.createElement(FormikTextInput, {\n    name: \"description\",\n    placeholder: \"Description\",\n    multiline: true,\n    numberOfLines: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  })), React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return dispatch({\n        type: 'SET_SHOW_DISTILLATION_DATE',\n        payload: !state.show\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.buttonContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.textContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }, distillationDateText))), React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return dispatch({\n        type: 'SET_SHOW_BOTTLING_DATE',\n        payload: !state.show\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.buttonContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.textContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 11\n    }\n  }, bottlingDateText))), React.createElement(View, {\n    style: styles.checkboxContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.textContainer2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }, \"Chill filtration\"), React.createElement(Checkbox, {\n    status: state.cfChecked ? 'checked' : 'unchecked',\n    onPress: function onPress() {\n      dispatch({\n        type: 'SET_CF_CHECKED',\n        payload: !state.cfChecked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.checkboxContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.textContainer2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, \"Artificial colouring\"), React.createElement(Checkbox, {\n    status: state.acChecked ? 'checked' : 'unchecked',\n    onPress: function onPress() {\n      dispatch({\n        type: 'SET_AC_CHECKED',\n        payload: !state.acChecked\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }\n  })), React.createElement(Button, {\n    icon: \"camera\",\n    mode: \"outlined\",\n    onPress: pickProfilePicFromLibrary,\n    style: styles.fieldContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, \"Upload image\"), React.createElement(Button, {\n    icon: 'bottle-wine',\n    style: styles.fieldContainer,\n    mode: \"outlined\",\n    onPress: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }, \"Submit whisky\"));\n};\n\nvar UploadWhisky = function UploadWhisky() {\n  var history = useHistory();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      visible = _useState4[0],\n      setVisible = _useState4[1];\n\n  var onToggleSnackBar = function onToggleSnackBar() {\n    return setVisible(!visible);\n  };\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nWhiskyID = _useState6[0],\n      setNWhiskyID = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      downloadURL = _useState8[0],\n      setDownloadURL = _useState8[1];\n\n  var _useContext2 = useContext(StateContext),\n      state = _useContext2.state,\n      dispatch = _useContext2.dispatch;\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      distillationDate = _useState10[0],\n      setDistillationDate = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      bottlingDate = _useState12[0],\n      setBottlingDate = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      distillationPressed = _useState14[0],\n      setDistillationPressed = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      bottlingPressed = _useState16[0],\n      setBottlingPressed = _useState16[1];\n\n  var addImageToFirestore = function addImageToFirestore(downloadURL, whiskyID) {\n    return _regeneratorRuntime.async(function addImageToFirestore$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setDownloadURL(downloadURL);\n            firebase.firestore().collection('whiskyImages').doc(whiskyID).set({\n              downloadURL: downloadURL\n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickProfilePicFromLibrary = function pickProfilePicFromLibrary() {\n    var result, whiskyID;\n    return _regeneratorRuntime.async(function pickProfilePicFromLibrary$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n            whiskyID = uuid.v4();\n            setNWhiskyID(whiskyID);\n\n            if (!result.cancelled) {\n              uploadImage(result.uri, whiskyID);\n              setImage(result.uri);\n              onToggleSnackBar();\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadImage = function uploadImage(uri, whiskyID) {\n    var response, blob, ref, uploadTask;\n    return _regeneratorRuntime.async(function uploadImage$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(fetch(uri));\n\n          case 2:\n            response = _context3.sent;\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 5:\n            blob = _context3.sent;\n            ref = firebase.storage().ref().child(\"images/whiskies/\" + whiskyID);\n            uploadTask = ref.put(blob);\n            uploadTask.on('state_changed', function (snapshot) {\n              var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n              console.log(\"Upload is \" + progress + \"% done\");\n\n              switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED:\n                  console.log('Upload is paused');\n                  break;\n\n                case firebase.storage.TaskState.RUNNING:\n                  console.log('Upload is running');\n                  break;\n              }\n            }, function (error) {\n              switch (error.code) {\n                case 'storage/unauthorized':\n                  console.log(error.code);\n                  break;\n\n                case 'storage/canceled':\n                  console.log(error.code);\n                  break;\n\n                case 'storage/unknown':\n                  console.log(error.code);\n                  break;\n              }\n            }, function () {\n              uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n                console.log('File available at', downloadURL);\n                addImageToFirestore(downloadURL, whiskyID);\n              });\n            });\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onSubmit = function onSubmit(values) {\n    var distillery, brand, nameAddition, country, region, category, age, abv, bottleSize, bottler, series, description, caskType, caskNumber, numberOfBottles, fullName;\n    return _regeneratorRuntime.async(function onSubmit$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            distillery = values.distillery, brand = values.brand, nameAddition = values.nameAddition, country = values.country, region = values.region, category = values.category, age = values.age, abv = values.abv, bottleSize = values.bottleSize, bottler = values.bottler, series = values.series, description = values.description, caskType = values.caskType, caskNumber = values.caskNumber, numberOfBottles = values.numberOfBottles;\n            fullName = distillery + brand + age + (distillationDate && Moment(distillationDate).format('DD-MM-YYYY')) + abv + bottler;\n            firebase.firestore().collection('whiskies').doc(nWhiskyID).set({\n              fullName: fullName,\n              distillery: distillery,\n              brand: brand,\n              nameAddition: nameAddition,\n              country: country,\n              region: region,\n              category: category,\n              age: age,\n              abv: abv,\n              bottleSize: bottleSize,\n              bottler: bottler,\n              series: series,\n              description: description,\n              caskType: caskType,\n              caskNumber: caskNumber,\n              numberOfBottles: numberOfBottles,\n              distillationDate: distillationDate !== '' ? Moment(distillationDate).format('DD-MM-YYYY') : '',\n              bottlingDate: bottlingDate !== '' ? Moment(bottlingDate).format('DD-MM-YYYY') : '',\n              artificialColoring: state.acChecked,\n              chillFiltration: state.cfChecked,\n              downloadURL: downloadURL,\n              reviewCount: 0,\n              rating: 0,\n              created_at: Moment(new Date()).format('DD-MM-YYYY')\n            }).then(function () {\n              console.log('Uploaded whisky successfully');\n            }).catch(function (error) {\n              console.log('Error uploading whisky: ', error);\n            });\n            history.push('/');\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onDistillationChange = function onDistillationChange(event, selectedDate) {\n    var currentDate = selectedDate || distillationDate;\n    console.log(currentDate, ' ', selectedDate);\n    dispatch({\n      type: 'SET_SHOW_DISTILLATION_DATE',\n      payload: false\n    });\n    setDistillationDate(currentDate);\n    setDistillationPressed(true);\n  };\n\n  var onBottlingChange = function onBottlingChange(event, selectedDate) {\n    var currentDate = selectedDate || bottlingDate;\n    dispatch({\n      type: 'SET_SHOW_BOTTLING_DATE',\n      payload: false\n    });\n    setBottlingDate(currentDate);\n    setBottlingPressed(true);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.heading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    color: 'primary',\n    fontSize: 'heading',\n    fontWeight: 'bold',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 11\n    }\n  }, \"Upload Whisky\")), React.createElement(Formik, {\n    initialValues: initialValues,\n    onSubmit: onSubmit,\n    validationSchema: validationSchema,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }\n  }, function (_ref2) {\n    var handleSubmit = _ref2.handleSubmit;\n    return React.createElement(UploadWhiskyForm, {\n      onSubmit: handleSubmit,\n      pickProfilePicFromLibrary: pickProfilePicFromLibrary,\n      distillationDate: distillationDate,\n      bottlingDate: bottlingDate,\n      distillationPressed: distillationPressed,\n      bottlingPressed: bottlingPressed,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 13\n      }\n    });\n  }), image && React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: {\n      width: 100,\n      height: 100,\n      alignSelf: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 19\n    }\n  })), state.showDistillationDate && React.createElement(DateTimePicker, {\n    testID: \"dateTimePicker\",\n    value: new Date(),\n    mode: 'date',\n    display: \"default\",\n    onChange: onDistillationChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }\n  }), state.showBottlingDate && React.createElement(DateTimePicker, {\n    testID: \"dateTimePicker\",\n    value: new Date(),\n    mode: 'date',\n    display: \"default\",\n    onChange: onBottlingChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default UploadWhisky;","map":{"version":3,"sources":["/home/hejoel/fullstack/fullstack-ht/fullstack-ht/fullstack-ht-app/src/components/UploadWhisky.jsx"],"names":["React","useState","useContext","Formik","yup","useHistory","uuid","ImagePicker","Button","Checkbox","Snackbar","DateTimePicker","firebase","Moment","Text","FormikTextInput","StateContext","theme","styles","StyleSheet","create","container","flexDirection","justifyContent","height","width","position","paddingVertical","zIndex","fieldContainer","margin","heading","alignItems","marginBottom","buttonContainer","paddingHorizontal","borderWidth","borderStyle","borderRadius","borderColor","textContainer","fontSize","fontSizes","body","fontFamily","fonts","main","color","textContainer2","marginTop","checkboxContainer","initialValues","distillery","brand","nameAddition","country","region","category","age","abv","bottleSize","bottler","series","description","caskType","caskNumber","numberOfBottles","validationSchema","object","shape","string","required","number","min","max","UploadWhiskyForm","onSubmit","pickProfilePicFromLibrary","distillationPressed","bottlingPressed","distillationDate","bottlingDate","state","dispatch","distillationDateText","format","bottlingDateText","type","payload","show","cfChecked","acChecked","UploadWhisky","history","image","setImage","visible","setVisible","onToggleSnackBar","nWhiskyID","setNWhiskyID","downloadURL","setDownloadURL","setDistillationDate","setBottlingDate","setDistillationPressed","setBottlingPressed","addImageToFirestore","whiskyID","firestore","collection","doc","set","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","v4","cancelled","uploadImage","uri","fetch","response","blob","ref","storage","child","uploadTask","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","then","values","fullName","artificialColoring","chillFiltration","reviewCount","rating","created_at","Date","catch","push","onDistillationChange","event","selectedDate","currentDate","onBottlingChange","handleSubmit","alignSelf","showDistillationDate","showBottlingDate"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport {\n  StyleSheet, View, ScrollView, Image, TouchableWithoutFeedback,\n} from 'react-native';\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport { useHistory } from 'react-router-native';\nimport uuid from 'uuid';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Button, Checkbox, Snackbar } from 'react-native-paper';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport firebase from 'firebase/app';\nimport Moment from 'moment';\nimport Text from './Text';\nimport FormikTextInput from './FormikTextInput';\nimport { StateContext } from '../state';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport theme from '../theme';\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    paddingVertical: 80,\n    zIndex: 1,\n  },\n  fieldContainer: {\n    margin: 5,\n  },\n  heading: {\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  buttonContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    borderColor: '#aab2bb',\n    margin: 5,\n  },\n  textContainer: {\n    fontSize: theme.fontSizes.body,\n    fontFamily: theme.fonts.main,\n    color: '#A6ACAF',\n  },\n  textContainer2: {\n    fontSize: theme.fontSizes.body,\n    fontFamily: theme.fonts.main,\n    marginTop: 9,\n    color: '#A6ACAF',\n  },\n  checkboxContainer: {\n    flexDirection: 'row',\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    borderColor: '#aab2bb',\n    margin: 5,\n  },\n});\n\nconst initialValues = {\n  distillery: '',\n  brand: '',\n  nameAddition: '',\n  country: '',\n  region: '',\n  category: '',\n  age: '',\n  abv: '',\n  bottleSize: '',\n  bottler: '',\n  series: '',\n  description: '',\n  caskType: '',\n  caskNumber: '',\n  numberOfBottles: '',\n};\n\nconst validationSchema = yup.object().shape({\n  distillery: yup\n    .string()\n    .required('Distillery is required'),\n  brand: yup\n    .string()\n    .required('Brand is required'),\n  nameAddition: yup\n    .string(),\n  country: yup\n    .string()\n    .required('Country is required'),\n  region: yup\n    .string(),\n  category: yup\n    .string()\n    .required('Category is required'),\n  age: yup\n    .number(),\n  abv: yup\n    .number()\n    .min(0, 'Abv must be non negative number')\n    .max(100, 'Abv can be atmost 100')\n    .required('Abv is required'),\n  bottleSize: yup\n    .number()\n    .required('Bottlesize is required'),\n  bottler: yup\n    .string(),\n  series: yup\n    .string(),\n  description: yup\n    .string(),\n  caskType: yup\n    .string(),\n  caskNumber: yup\n    .number(),\n  numberOfBottles: yup\n    .number(),\n});\n\nconst UploadWhiskyForm = ({\n  onSubmit, pickProfilePicFromLibrary,\n  distillationPressed, bottlingPressed, distillationDate, bottlingDate,\n}) => {\n  const { state, dispatch } = useContext(StateContext);\n  const distillationDateText = distillationPressed ? Moment(distillationDate).format('DD-MM-YYYY') : 'Distillation date';\n  const bottlingDateText = bottlingPressed ? Moment(bottlingDate).format('DD-MM-YYYY') : 'Bottling date';\n\n  return (\n    <View>\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"distillery\"\n          placeholder=\"Distillery\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"brand\"\n          placeholder=\"Brand\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"nameAddition\"\n          placeholder=\"Name addition\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"country\"\n          placeholder=\"Country\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"region\"\n          placeholder=\"Region\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"category\"\n          placeholder=\"Category\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"age\"\n          keyboardType=\"numeric\"\n          placeholder=\"Age\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"abv\"\n          keyboardType=\"numeric\"\n          placeholder=\"Abv\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"bottleSize\"\n          keyboardType=\"numeric\"\n          placeholder=\"Bottlesize (Liter)\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"bottler\"\n          placeholder=\"Bottler\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"series\"\n          placeholder=\"Series\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"caskType\"\n          placeholder=\"Cask Type\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"caskNumber\"\n          keyboardType=\"numeric\"\n          placeholder=\"Cask Number\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"numberOfBottles\"\n          keyboardType=\"numeric\"\n          placeholder=\"Number of bottles\"\n        />\n      </View>\n\n      <View style={styles.fieldContainer}>\n        <FormikTextInput\n          name=\"description\"\n          placeholder=\"Description\"\n          multiline\n          numberOfLines={1}\n        />\n      </View>\n\n      <TouchableWithoutFeedback onPress={() => dispatch({ type: 'SET_SHOW_DISTILLATION_DATE', payload: !state.show })}>\n        <View style={styles.buttonContainer}>\n          <Text style={styles.textContainer}>{distillationDateText}</Text>\n        </View>\n      </TouchableWithoutFeedback>\n\n      <TouchableWithoutFeedback onPress={() => dispatch({ type: 'SET_SHOW_BOTTLING_DATE', payload: !state.show })}>\n        <View style={styles.buttonContainer}>\n          <Text style={styles.textContainer}>{bottlingDateText}</Text>\n        </View>\n      </TouchableWithoutFeedback>\n\n      <View style={styles.checkboxContainer}>\n\n        <Text style={styles.textContainer2}>Chill filtration</Text>\n\n        <Checkbox\n          status={state.cfChecked ? 'checked' : 'unchecked'}\n          onPress={() => {\n            dispatch({ type: 'SET_CF_CHECKED', payload: !state.cfChecked });\n          }}\n        />\n\n      </View>\n\n      <View style={styles.checkboxContainer}>\n\n        <Text style={styles.textContainer2}>Artificial colouring</Text>\n\n        <Checkbox\n          status={state.acChecked ? 'checked' : 'unchecked'}\n          onPress={() => {\n            dispatch({ type: 'SET_AC_CHECKED', payload: !state.acChecked });\n          }}\n        />\n\n      </View>\n\n      <Button icon=\"camera\" mode=\"outlined\" onPress={pickProfilePicFromLibrary} style={styles.fieldContainer}>Upload image</Button>\n\n      <Button icon={'bottle-wine'} style={styles.fieldContainer} mode=\"outlined\" onPress={onSubmit}>\n        Submit whisky\n      </Button>\n    </View>\n  );\n};\n\nconst UploadWhisky = () => {\n  const history = useHistory();\n  const [image, setImage] = useState();\n  const [visible, setVisible] = useState(false);\n  const onToggleSnackBar = () => setVisible(!visible);\n  const [nWhiskyID, setNWhiskyID] = useState('');\n  const [downloadURL, setDownloadURL] = useState('');\n  const { state, dispatch } = useContext(StateContext);\n  const [distillationDate, setDistillationDate] = useState('');\n  const [bottlingDate, setBottlingDate] = useState('');\n  const [distillationPressed, setDistillationPressed] = useState(false);\n  const [bottlingPressed, setBottlingPressed] = useState(false);\n\n  const addImageToFirestore = async (downloadURL, whiskyID) => {\n    setDownloadURL(downloadURL);\n\n    firebase.firestore()\n      .collection('whiskyImages')\n      .doc(whiskyID)\n      .set({\n        downloadURL,\n      });\n  };\n\n  const pickProfilePicFromLibrary = async () => {\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    const whiskyID = uuid.v4();\n    setNWhiskyID(whiskyID);\n\n    if (!result.cancelled) {\n      uploadImage(result.uri, whiskyID);\n      setImage(result.uri);\n      onToggleSnackBar();\n    }\n  };\n\n  const uploadImage = async (uri, whiskyID) => {\n    const response = await fetch(uri);\n    const blob = await response.blob();\n\n    const ref = firebase.storage().ref().child(`images/whiskies/${whiskyID}`);\n\n    const uploadTask = ref.put(blob);\n\n    uploadTask.on('state_changed',\n      (snapshot) => {\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and\n        // the total number of bytes to be uploaded\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log(`Upload is ${progress}% done`);\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload is running');\n            break;\n        }\n      },\n      (error) => {\n        // Handle unsuccessful uploads\n        switch (error.code) {\n          case 'storage/unauthorized':\n            // User doesn't have permission to access the object\n            console.log(error.code);\n            break;\n          case 'storage/canceled':\n            // User canceled the upload\n            console.log(error.code);\n            break;\n          case 'storage/unknown':\n            // Unknown error occurred, inspect error.serverResponse\n            console.log(error.code);\n            break;\n        }\n      },\n      () => {\n        // Handle successful uploads on complete\n        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n        uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n          console.log('File available at', downloadURL);\n          addImageToFirestore(downloadURL, whiskyID);\n        });\n      });\n  };\n\n  const onSubmit = async (values) => {\n    const {\n      distillery, brand, nameAddition, country, region, category, age, abv, bottleSize,\n      bottler, series, description, caskType, caskNumber, numberOfBottles,\n    } = values;\n\n    const fullName = distillery + brand + age + (distillationDate && Moment(distillationDate).format('DD-MM-YYYY'))\n     + abv + bottler;\n\n    firebase.firestore().collection('whiskies').doc(nWhiskyID).set({\n      fullName,\n      distillery,\n      brand,\n      nameAddition,\n      country,\n      region,\n      category,\n      age,\n      abv,\n      bottleSize,\n      bottler,\n      series,\n      description,\n      caskType,\n      caskNumber,\n      numberOfBottles,\n      distillationDate: distillationDate !== '' ? Moment(distillationDate).format('DD-MM-YYYY') : '',\n      bottlingDate: bottlingDate !== '' ? Moment(bottlingDate).format('DD-MM-YYYY') : '',\n      artificialColoring: state.acChecked,\n      chillFiltration: state.cfChecked,\n      downloadURL,\n      reviewCount: 0,\n      rating: 0,\n      created_at: Moment(new Date()).format('DD-MM-YYYY'),\n\n    })\n      .then(() => { console.log('Uploaded whisky successfully'); })\n      .catch((error) => {\n        console.log('Error uploading whisky: ', error);\n      });\n    history.push('/');\n  };\n\n  const onDistillationChange = (event, selectedDate) => {\n    const currentDate = selectedDate || distillationDate;\n    console.log(currentDate, ' ', selectedDate);\n    dispatch({ type: 'SET_SHOW_DISTILLATION_DATE', payload: false });\n    setDistillationDate(currentDate);\n    setDistillationPressed(true);\n  };\n\n  const onBottlingChange = (event, selectedDate) => {\n    const currentDate = selectedDate || bottlingDate;\n    dispatch({ type: 'SET_SHOW_BOTTLING_DATE', payload: false });\n    setBottlingDate(currentDate);\n    setBottlingPressed(true);\n  };\n\n  return (\n    <View style={styles.container}>\n      <ScrollView>\n        <View style={styles.heading}>\n          <Text color={'primary'} fontSize={'heading'} fontWeight={'bold'}>\n            Upload Whisky\n          </Text>\n        </View>\n\n        <Formik\n          initialValues={initialValues}\n          onSubmit={onSubmit}\n          validationSchema={validationSchema}\n        >\n          {({ handleSubmit }) =>\n            <UploadWhiskyForm onSubmit={handleSubmit} pickProfilePicFromLibrary={pickProfilePicFromLibrary} distillationDate={distillationDate} bottlingDate={bottlingDate} distillationPressed={distillationPressed} bottlingPressed={bottlingPressed} />}\n        </Formik>\n        {image && <Image source={{ uri: image }} style={{ width: 100, height: 100, alignSelf: 'center' }} />}\n      </ScrollView>\n      { state.showDistillationDate && (\n        <DateTimePicker\n          testID=\"dateTimePicker\"\n          value={new Date()}\n          mode={'date'}\n          display=\"default\"\n          onChange={onDistillationChange}\n        />\n      )}\n      { state.showBottlingDate && (\n        <DateTimePicker\n          testID=\"dateTimePicker\"\n          value={new Date()}\n          mode={'date'}\n          display=\"default\"\n          onChange={onBottlingChange}\n        />\n      )}\n\n    </View>\n  );\n};\n\nexport default UploadWhisky;\n"]},"metadata":{},"sourceType":"module"}